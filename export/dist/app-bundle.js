System.register("alis/app.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default","/*\n  Search bar styles\n*/\n.toolbar.searchbar {\n  padding: 5px 10px 0;\n}\n\n.toolbar.searchbar.floating + .page__background + .page__content {\n    margin-top: -1px;\n    top: 0;\n}\n\n.toolbar.searchbar.toolbar--transparent .center {\n  box-shadow: 0 1px 5px rgba(0,0,0,.3);\n  border-color: transparent;\n}\n\n.toolbar.searchbar .toolbar-button {\n  color: #666;\n  margin: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  border: none;\n}\n.toolbar.searchbar.toolbar--material .toolbar-button--material {\n  color: #666;\n  margin: 0;\n  border: none;\n}\n.toolbar.searchbar.toolbar--material .toolbar-button--material .ons-icon,\n.toolbar.searchbar.toolbar--material .ons-icon  {\n  width: 22px;\n  font-size: 22px;\n  text-align: center;\n}\n.toolbar.searchbar .toolbar-button .ons-icon, .toolbar.searchbar .ons-icon {\n  width: 17px;\n  text-align: center;\n}\n\n.toolbar.searchbar .left, .toolbar.searchbar .right {\n  min-width: auto;\n  width: auto;\n}\n.toolbar.searchbar .center {\n  flex: 1;\n  display: flex;\n  height: 34px;\n  line-height: 34px;\n  border-radius: 4px;\n  background-color: #fff;\n  max-width: 100%;\n}\n.toolbar.searchbar.toolbar--material .center {\n  height: 46px;\n  line-height: 46px;\n}\n.toolbar.searchbar .search-input {\n  width: 100%;\n  height: 100%;\n  background-image: none;\n  background-color: transparent;\n  border: none;\n  font-size: 17px;\n  padding: 0 8px;\n  line-height: inherit;\n}\n\n/*\n  Simple card style\n*/\n.card {\n  margin: 10px;\n  /*border: 1px solid #ccc;*/\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 10px;\n  box-shadow: 0 1px 5px rgba(0,0,0,.3);\n}\n\n/*\n  White background for normal text pages\n*/\n.page-text .page__background {\n  background-color: #fff;\n}\n\n/*\n  Material inputs without underbar\n*/\nons-select.no-underbar select.select-input--material {\n  background-image: none;\n  padding: 0;\n}\n\n/*\n  Forms\n*/\n.list-item .input-label {\n  font-size: 14px;\n  opacity: 0.75;\n  width: 100%;\n}\n.list-item .error {\n  padding-top: 8px;\n  color: #ee0000;\n  font-size: 12px;\n}\n\n/*\n  Map\n*/\n.leaflet-map-static {\n  pointer-events: none;\n}\n.leaflet-map-static .leaflet-pane img {\n  pointer-events: none;\n}\n.leaflet-control .zmdi {\n  font-size: 1.4em;\n  line-height: inherit;\n}\n\n/*\n  iOS fix\n*/\nons-button, ons-button.button, ons-toolbar-button, ons-list-item, ons-fab, ons-back-button {\n  cursor: pointer;\n}\n")}}}),System.register("alis/app.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from ="./app.css"></require>\n  <ons-splitter>\n    <ons-splitter-side id="menu" ref="_menu" side="left" collapse swipeable swipe-target-width="1">\n      <ons-page>\n        <ons-list modifier="noborder">\n          <ons-list-item repeat.for="nav of router.navigation" click.delegate="navigateTo(nav)" modifier="nodivider">\n            <span class="center">${nav.title}</span>\n          </ons-list-item>\n        </ons-list>\n      </ons-page>\n    </ons-splitter-side>\n    <ons-splitter-content>\n      <ons-navigator></ons-navigator>\n    </ons-splitter-content>\n  </ons-splitter>\n</template>\n')}}}),System.register("alis/app.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","./services/db"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Database}],execute:function(){a("App",i=(g=e(f))(h=function(){function a(b){c(this,a),this.db=b}return d(a,[{key:"activate",value:function(){return this.db.load().then(function(){}).catch(function(){})}},{key:"configureRouter",value:function(a,b){a.title="Höranlagen",a.map([{route:["","home"],name:"home",moduleId:"./pages/home",nav:!1},{route:"add-system",name:"add-system",moduleId:"./pages/system/add",title:"Fehlende Anlage melden",nav:!0,settings:{}},{route:"help",name:"help",moduleId:"./pages/help/index",nav:!0,title:"Hilfe",settings:{}},{route:"help/reception",name:"help-reception",moduleId:"./pages/help/reception",nav:!1,title:"Drahtloser Empfang",settings:{category:"help"}},{route:"help/hearing-loop",name:"help-hearing-loop",moduleId:"./pages/help/hearing-loop",nav:!1,title:"Informationen zu Höranlagen",settings:{category:"help"}},{route:"help/symbols",name:"help-symbols",moduleId:"./pages/help/symbols",nav:!1,title:"Symbole",settings:{category:"help"}},{route:"sponsors",name:"sponsors",moduleId:"./pages/sponsors",nav:!0,title:"Sponsoren",settings:{}},{route:"impressum",name:"impressum",moduleId:"./pages/impressum",nav:!0,title:"Impressum",settings:{}},{route:"system/:id",name:"system",moduleId:"./pages/system/info",nav:!1},{route:"system/:id/:plan",name:"system-plan",moduleId:"./pages/system/plan",nav:!1}]),this.router=b}},{key:"navigateTo",value:function(a){this._menu.close(),this.router.navigateToRoute(a.config.name)}}]),a}())||h),a("App",i)}}}),System.register("alis/components/leaflet-layer-control.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default","leaflet-layer-control ons-popover {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 99999;\n}\n")}}}),System.register("alis/components/leaflet-layer-control.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from="./leaflet-layer-control.css"></require>\n\n  <ons-popover ref="layerControlEl" direction="down" cover-target cancelable modifier="material">\n    <ons-list>\n      <ons-list-header style="display:flex;flex-direction:row;align-items:center;padding-right:0;">\n        <span style="flex:1;">Kartentyp</span>\n        <ons-button modifier="quiet" click.delegate="hideLayerControl()" style="color:inherit;">\n          <ons-icon icon="md-close" fixed-width="true"></ons-icon>\n        </ons-button>\n      </ons-list-header>\n      <ons-list-item repeat.for="baseLayer of config.basemaps" click.delegate="changeBaseLayer(baseLayer.id)" tappable>\n        <div class="center">\n          ${baseLayer.title}\n        </div>\n        <div class="right">\n          <ons-icon icon="fa-check" if.bind="baseLayer.id === state.baseLayerId"></ons-icon>\n        </div>\n      </ons-list-item>\n    </ons-list>\n  </ons-popover>\n</template>\n')}}}),System.register("alis/components/leaflet-layer-control.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../services/storage","../services/config","../services/state"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.inject,h=a.bindable},function(a){i=a.Storage},function(a){j=a.Config},function(a){k=a.State}],execute:function(){a("LeafletLayerControlCustomElement",(l=g(Element,j,k,i),m=h(),q=l((o=function(){function a(b,d,f,g){e(this,a),c(this,"map",p,this),this.el=b,this.config=d,this.state=f,this.baseLayers=new Map,this.overlays=new Map;var h=!0,i=!1,j=void 0;try{for(var k,l=this.config.basemaps[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value;"google"===m.type&&this.baseLayers.set(m.id,L.gridLayer.googleMutant(m.config))}}catch(a){i=!0,j=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw j}}this.button=L.easyButton("zmdi zmdi-layers",this.showLayerControl.bind(this),{position:"topright"})}return f(a,[{key:"mapChanged",value:function(a){this.map&&this.button.addTo(this.map)}},{key:"showLayerControl",value:function(){this.layerControlEl.show(this.button.getContainer())}},{key:"hideLayerControl",value:function(){this.layerControlEl.hide()}},{key:"changeBaseLayer",value:function(a){var b=this.state.baseLayerId;a!==b&&(this.map.removeLayer(this.baseLayers.get(b)),this.map.addLayer(this.baseLayers.get(a)),this.state.baseLayerId=a)}}]),a}(),p=d(o.prototype,"map",[m],{enumerable:!0,initializer:null}),n=o))||n)),a("LeafletLayerControlCustomElement",q)}}}),System.register("alis/components/leaflet-map.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default","leaflet-map, leaflet-map .leaflet-map {\n  width: 100%;\n  height: 100%;\n}\n\nleaflet-map.leaflet-map-fixed .leaflet-map {\n  pointer-events: none;\n}\n\nleaflet-map.leaflet-map-fixed .leaflet-map img {\n  pointer-events: none;\n}\n\nleaflet-map .leaflet-layer-control {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 99999;\n}\n\nleaflet-map .leaflet-button-plain {\n  background-color: #fff;\n  color: #333;\n}\n")}}}),System.register("alis/components/leaflet-map.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from="./leaflet-map.css"></require>\n\n  <div ref="mapContainer" class="leaflet-map"></div>\n  <leaflet-layer-control map.bind="map" if.bind="layerControl"></leaflet-layer-control>\n</template>\n')}}}),System.register("alis/components/leaflet-map.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../services/storage","../services/config","../services/state"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.inject,h=a.bindable},function(a){i=a.Storage},function(a){j=a.Config},function(a){k=a.State}],execute:function(){a("LeafletMap",(l=g(Element,j,k,i),m=h(),n=h(),o=h(),p=h(),q=h(),r=h(),A=l((t=function(){function a(b,d,f,g){e(this,a),this.mapOptions={attributionControl:!1},c(this,"center",u,this),c(this,"bounds",v,this),c(this,"fixed",w,this),c(this,"layerControl",x,this),c(this,"zoomControl",y,this),c(this,"overlays",z,this),this.el=b,this.config=d,this.state=f,this.storage=g,this.baseLayers=new Map,this._overlays=[];var h=!0,i=!1,j=void 0;try{for(var k,l=this.config.basemaps[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value;"google"===m.type&&this.baseLayers.set(m.id,L.gridLayer.googleMutant(m.config))}}catch(a){i=!0,j=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw j}}}return f(a,[{key:"attached",value:function(){this.bounds||(this.bounds=L.latLngBounds(this.storage.getItem("mapbounds"))),this.mapOptions.zoomControl=this.zoomControl,this.map||(this.map=L.map(this.mapContainer,this.mapOptions)),this.map.addLayer(this.baseLayers.get(this.state.baseLayerId)),this.bounds?this.map.fitBounds(this.bounds):this.map.setView(this.config.map.center,this.config.map.zoom),this.updateOverlays(),this.map.on("click",this.onMapClick.bind(this))}},{key:"centerChanged",value:function(a){a&&this.map.setView(a,this.map.getZoom())}},{key:"boundsChanged",value:function(a){a&&this.map&&this.map.fitBounds(a)}},{key:"fixedChanged",value:function(a){var b="leaflet-map-fixed";!0===a?this.el.classList.add(b):this.el.classList.remove(b)}},{key:"overlaysChanged",value:function(a,b){this.map&&this.updateOverlays()}},{key:"updateOverlays",value:function(){var a=this.overlays||[],b=!0,c=!1,d=void 0;try{for(var e,f=this._overlays[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value;this.map.removeLayer(g)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}var h=!0,i=!1,j=void 0;try{for(var k,l=a[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value,n=void 0;"marker"===m.type&&(n=L.marker(m.latLng).addTo(this.map)),n.data=m,this._overlays.push(n)}}catch(a){i=!0,j=a}finally{try{!h&&l.return&&l.return()}finally{if(i)throw j}}}},{key:"showLayerControl",value:function(){this.layerControlEl.show(this.layerControlTargetEl)}},{key:"hideLayerControl",value:function(){this.layerControlEl.hide()}},{key:"changeBaseLayer",value:function(a){var b=this.state.baseLayerId;a!==b&&(this.map.removeLayer(this.baseLayers.get(b)),this.map.addLayer(this.baseLayers.get(a)),this.state.baseLayerId=a)}},{key:"onMapClick",value:function(a){console.log("Map map click event");var b=new CustomEvent("mapclick",{detail:a});this.el.dispatchEvent(b)}}]),a}(),u=d(t.prototype,"center",[m],{enumerable:!0,initializer:null}),v=d(t.prototype,"bounds",[n],{enumerable:!0,initializer:null}),w=d(t.prototype,"fixed",[o],{enumerable:!0,initializer:function(){return!1}}),x=d(t.prototype,"layerControl",[p],{enumerable:!0,initializer:function(){return!0}}),y=d(t.prototype,"zoomControl",[q],{enumerable:!0,initializer:function(){return!0}}),z=d(t.prototype,"overlays",[r],{enumerable:!0,initializer:null}),s=t))||s)),a("LeafletMap",A)}}}),System.register("alis/main.js",["aurelia-binding","aurelia-bootstrapper","aurelia-event-aggregator","aurelia-framework","aurelia-dependency-injection","aurelia-history-browser","aurelia-loader-default","aurelia-logging-console","aurelia-metadata","aurelia-pal-browser","aurelia-path","aurelia-polyfills","aurelia-route-recognizer","aurelia-router","aurelia-templating","aurelia-templating-binding","aurelia-templating-resources","aurelia-templating-router","aurelia-onsenui","whatwg-fetch","aurelia-pal"],function(a,b){"use strict";function c(a){a.use.basicConfiguration().history().plugin("aurelia-onsenui").developmentLogging().globalResources([d.moduleName("src/components/leaflet-layer-control"),d.moduleName("src/components/leaflet-map")]),a.start().then(function(){return a.setRoot()})}var d;return a("configure",c),{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){d=a.PLATFORM}],execute:function(){}}}),System.register("alis/pages/help/hearing-loop.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <iframe width="100%" src="https://www.youtube.com/embed/pOHBhKu7pO8" frameborder="0" allowfullscreen></iframe>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/help/hearing-loop.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("HearingLoop",e=function(){function a(){c(this,a)}return d(a,[{key:"activate",value:function(a,b){this.title=b.title}}]),a}()),a("HearingLoop",e)}}}),System.register("alis/pages/help/index.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <ons-list>\n      <ons-list-item repeat.for="item of navigation" click.delegate="navigateTo(item)">\n        ${item.title}\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/help/index.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","aurelia-router"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Router}],execute:function(){a("Index",i=(g=e(f))(h=function(){function a(b){c(this,a),this.router=b,this.navigation=b.routes.filter(function(a){return"help"===a.settings.category})}return d(a,[{key:"activate",value:function(a,b){this.title=b.title}},{key:"navigateTo",value:function(a){this.router.navigateToRoute(a.name)}}]),a}())||h),a("Index",i)}}}),System.register("alis/pages/help/reception.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <ons-page class="page-text">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <div>\n      <img width="100%" src="${image.src}" alt="${image.description}">\n    </div>\n    <div style="margin:0 10px 10px;">\n      Ein Hörsystem vergfügt in der Regel über eine induktive Antenne,\n      die für das Telefonieren mit einem Smartphone vorgesehen ist. Schalten\n      Sie Ihr Hörsystem auf induktivem Empfang um, und der Gesprächspartner\n      wird klar und deutlich verständlich, ohne Hintergrundlärm. Fragen Sie\n      Ihren Hörsystemakustiker, wie dieser induktiver Empfang eingeschaltet\n      wird.\n    </div>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/help/reception.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../../services/config"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Config}],execute:function(){a("Reception",i=(g=e(f))(h=function(){function a(b){c(this,a),this.config=b}return d(a,[{key:"activate",value:function(a,b){this.title=b.title,this.image={src:this.config.baseUrl+"/images/InduktiveAntenne.jpg",description:""}}}]),a}())||h),a("Reception",i)}}}),System.register("alis/pages/help/symbols.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <ons-list>\n      <ons-list-header>Technologien</ons-list-header>\n      <ons-list-item repeat.for="technology of technologies">\n        <span class="left" style="align-self:flex-start;">\n          <img src="${technology.imageUrl}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          <span class="list-item__title">${technology.title}</span>\n          <span class="list-item__subtitle">${technology.description}</span>\n        </span>\n      </ons-list-item>\n    </ons-list>\n    <ons-list>\n      <ons-list-header>Bewertungen</ons-list-header>\n      <ons-list-item repeat.for="rating of ratings">\n        <span class="left" style="align-self:flex-start;">\n          <img src="${rating.image}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          <span class="list-item__title">${rating.title}</span>\n          <span class="list-item__subtitle">${rating.description}</span>\n        </span>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/help/symbols.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../../services/db","../../services/config","../../models/technology"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Database},function(a){g=a.Config},function(a){h=a.Technology}],execute:function(){a("Symbols",k=(i=e(f,g))(j=function(){function a(b,d){c(this,a),this.db=b,this.config=d}return d(a,[{key:"activate",value:function(a,b){this.title=b.title,this.technologies=this.db.query(h).all(),this.ratings=[{image:this.getRatingImageUrl(1),title:"Grüne Raute",description:"Geprüfte Höranlage gemäss Norm."},{image:this.getRatingImageUrl(2),title:"Gelbe Raute",description:"Überprüfte Höranlage (nicht nach Norm geprüft oder mit Mängeln)."},{image:this.getRatingImageUrl(3),title:"Weisse Raute",description:"Nicht überprüfte Höranlage, keine Bewertung. "}]}},{key:"getRatingImageUrl",value:function(a){var b=this.config.baseUrl+"/symbols/";switch(a){case 1:b+="r32_green.png";break;case 2:b+="r32_yellow.png";break;default:b+="r32_white.png"}return b}}]),a}())||j),a("Symbols",k)}}}),System.register("alis/pages/home.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",".leaflet-building-icon div {\n  background-color: #4E342E;\n  border-radius: 50%;\n  border: 1.5px solid #ffffff;\n  line-height: 25px;\n  font-size: 12px;\n  color: #ffffff;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.leaflet-building-icon div span {\n  color: #fff;\n}\n.leaflet-building-icon .ion {\n  font-size: 17px;\n  line-height: 1em;\n  vertical-align: -2px;\n}\n.leaflet-building-icon .mki {\n  font-size: 20px;\n  line-height: 1em;\n}\n.leaflet-building-icon .mki.mki-chapel,\n.leaflet-building-icon .mki.mki-building {\n  vertical-align: -2px;\n  font-size: 22px;\n}\n.leaflet-building-icon .mki.mki-museum {\n  vertical-align: -1px;\n}\n.leaflet-building-icon .mki.mki-court_house {\n  vertical-align: -2px;\n}\n.leaflet-building-icon .mki.mki-theatre {\n  vertical-align: -3px;\n}\n\n.marker-cluster-small {\n  line-height: 22px;\n}\n.marker-cluster-medium {\n  line-height: 26px;\n}\n.marker-cluster-large {\n  line-height: 30px;\n}\n\n.marker-cluster {\n\tbackground-clip: padding-box;\n\tborder-radius: 100%;\n  font-size: 12px;\n  background-color: rgba(78, 56, 42, 0.6);\n  border: 5px solid rgba(78, 56, 42, 0.2);\n}\n.marker-cluster div {\n\ttext-align: center;\n\tborder-radius: 15px;\n  color: #fff;\n  line-height: inherit;\n}\n\n.leaflet-container .leaflet-google-mutant .gmnoprint {\n  display: none;\n}\n.leaflet-container .leaflet-google-mutant .gmnoprint.gm-style-cc {\n  display: inherit;\n}\n\n.category-item {\n  width: 33%;\n  text-align:center;\n}\n.category-item .category-label {\n  padding-top:5px;\n  font-size:13px;\n  max-width:100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #666;\n}\n\n.category-item .ons-icon {\n  font-size: 30px;\n}\n.category-item .ons-icon.mki {\n  font-size: 34px;\n}\n.category-item .ons-icon.mki.mki-chapel,\n.category-item .ons-icon.mki.mki-building {\n  font-size: 38px;\n  margin-top: 2px;\n}\n.category-item .ons-icon.mki.mki-museum,\n.category-item .ons-icon.mki.mki-court_house {\n  margin-top: 2px;\n}\n\n.category-item .ons-icon.mki.mki-theatre {\n  margin-top: 3px;\n}\n")}}}),System.register("alis/pages/home.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from="./home.css"></require>\n  <ons-page>\n    <ons-toolbar modifier="" class="searchbar ${isSearching ? \'toolbar--transparent\' : \'\'}">\n      <div class="left">\n      </div>\n      <div class="center">\n        <ons-toolbar-button if.bind="!isSearching" click.delegate="showMenu()">\n          <ons-icon icon="ion-navicon, material:md-menu"></ons-icon>\n        </ons-toolbar-button>\n        <ons-toolbar-button if.bind="isSearching" click.delegate="cancelSearch()">\n          <ons-icon icon="ion-ios-arrow-back, material:md-arrow-left"></ons-icon>\n        </ons-toolbar-button>\n        <form style="flex:1;" submit.delegate="onSearch()" click.delegate="showSearch()">\n          <input ref="_searchinput" type="search" class="search-input" placeholder="Höranlage suchen..." value.bind="searchText" input.trigger="onSearchInput()" />\n        </form>\n        <ons-toolbar-button if.bind="searchText" click.delegate="clearSearch()">\n          <ons-icon icon="ion-ios-close-empty, material:md-close"></ons-icon>\n        </ons-toolbar-button>\n      </div>\n      <div class="right">\n      </div>\n    </ons-toolbar>\n    \x3c!-- search sheet overlay --\x3e\n    <div show.bind="isSearching" style="z-index:11000;background-color:#fff;position:absolute;top:0;right:0;left:0;bottom:0;" ref="_searchoverlay">\n      <div class="card" show.bind="!searchText">\n        <div style="display:flex;flex-wrap:wrap;align-items:flex-start;">\n          <div class="category-item" repeat.for="category of categories">\n            <div style="padding:10px 5px;" click.delegate="searchCategory(category)">\n              <ons-button css="width:48px;height:48px;border-radius:100%;line-height:48px;padding:0;background-color:${category.icon.color};">\n                <span class="category ons-icon ${category.icon.prefix} ${category.icon.prefix}-${category.icon.name}"></span>\n              </ons-button>\n              <div class="category-label">${category.typ}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style="padding:0 10px;" show.bind="searchText && searchResults.locations.length === 0 && searchResults.systems.length === 0">\n        <p>\n          Für den eingegebenen Suchbegriffe wurde leider nichts gefunden.\n        </p>\n      </div>\n      <div class="card" style="padding:0;" show.bind="searchText">\n        <ons-list>\n          <ons-list-item repeat.for="location of searchResults.locations" tappable modifier="longdivider" click.delegate="onLocationResultClick(location)">\n            <div class="left"></div>\n            <div class="center">\n              <span class="list-item__title">${location.name}</span>\n            </div>\n          </ons-list-item>\n          <ons-list-item repeat.for="system of searchResults.systems" tappable modifier="longdivider" click.delegate="onResultClick(system)">\n            <div class="left"></div>\n            <div class="center">\n              <span class="list-item__title">${system.building.name || system.organisation.name}</span>\n              <span class="list-item__subtitle">\n                <span if.bind="system.building.name">${system.organisation.name}</span>\n                <br if.bind="system.building.name"/>\n                <span>${system.building.strasse_nr}, ${system.building.plz} ${system.building.ort}</span>\n              </span>\n            </div>\n          </ons-list-item>\n        </ons-list>\n      </div>\n    </div>\n    <div style="display:flex;flex-direction:column;height:100%;">\n      <div ref="_map" style="flex:1;width:100%;"></div>\n      <leaflet-layer-control map.bind="map"></leaflet-layer-control>\n      <div show.bind="selection" style="position:relative;max-height:60%;height:auto;z-index:10000;display:flex;">\n        <ons-button style="position:fixed;right:0;left:auto;margin-top:-16px;z-index:10000;" modifier="quiet">\n          <ons-icon icon="ion-record,material:md-circle" size="2x" style="color:#fff;"></ons-icon>\n        </ons-button>\n        <ons-button click.trigger="deselect()" style="position:fixed;right:0;left:auto;margin-top:-16px;z-index:10001;" modifier="quiet">\n          <ons-icon icon="ion-ios-close,material:md-close-circle" size="2x"></ons-icon>\n        </ons-button>\n        <ons-list style="flex:1;overflow-y:scroll;" ref="_selectionList">\n          <template if.bind="selection.systems.length === 1">\n            <ons-list-header if.bind="selection.name && selection.name !== selection.systems[0].name">\n              <span>${selection.name}</span>\n            </ons-list-header>\n            <ons-list-item repeat.for="system of selection.systems" tappable click.trigger="showInfo(system)" style="margin-bottom:0px;">\n              <span class="list-item__title">\n                <span>${system.name}</span>\n              </span>\n              <span class="list-item__subtitle" if.bind="system.organisation.name">\n                <span>${system.organisation.name}</span>\n              </span>\n            </ons-list-item>\n          </template>\n          <template if.bind="selection.systems.length > 1">\n            <ons-list-header if.bind="selection.name">\n              <span>${selection.name}</span>\n            </ons-list-header>\n              <ons-list-item repeat.for="system of selection.systems" tappable click.trigger="showInfo(system)" style="margin-bottom:0px;">\n                <span class="list-item__title">\n                  <span>${system.name}</span>\n                </span>\n                <span class="list-item__subtitle" if.bind="system.organisation.name">\n                  <span>${system.organisation.name}</span>\n                </span>\n              </ons-list-item>\n          </template>\n        </ons-list>\n      </div>\n    </div>\n  </ons-page>\n</template>\n')}}}),System.register("alis/services/state.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","./config","./storage"],function(a,b){"use strict";var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Config},function(a){g=a.Storage}],execute:function(){a("State",j=(h=e(f,g))(i=function(){function a(b,d){c(this,a),this.config=b,this.storage=d,this.baseLayerId=this.config.map.basemap}return d(a,[{key:"mapCenter",get:function(){return L.latLngBounds(this.storage.getItem("mapbounds")).getCenter()}}]),a}())||i),a("State",j)}}}),System.register("alis/services/search.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","./db","../models/location","../models/system"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Database},function(a){g=a.Location},function(a){h=a.System}],execute:function(){a("Search",k=(i=e(f))(j=function(){function a(b){c(this,a),this.db=b,this.reset()}return d(a,[{key:"reset",value:function(){this.text=null,this.filter=null,this.applyFilters=!0,this.dataset=[],this.results={locations:[],systems:[]}}},{key:"update",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.query=this.db.query(h),this.applyFilters&&this.filter&&this.query.filterBy(this.filter.property,this.filter.value),this.dataset=this.query.all(),this.applyFilters){var b=new Map;this.results={locations:[],systems:[]};var c=!0,d=!1,e=void 0;try{for(var f,g=this.dataset[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var i=f.value,j=i.building,k=i.organisation,l=j.id+"-"+k.id;if(b.has(l)||(b.set(l,i),this.results.systems.push(i)),20===this.results.systems.length)break}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}else a&&(this.results=this.execute(a))}},{key:"execute",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,c={locations:[],systems:[]};a=a.trim().toLowerCase().split(" ").filter(function(a){return""!==a});var d=!0,e=!1,f=void 0;try{for(var h,i=this.db.query(g).all()[Symbol.iterator]();!(d=(h=i.next()).done);d=!0){for(var j=h.value,k=(j.name+" "+j.plzs).toLowerCase(),l=0,m=0;m<a.length;m++){var n=a[m];k.indexOf(n)>-1&&l++}if(l===a.length&&c.locations.push(j),3===c.locations.length)break}}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}var o=new Map,p=!0,q=!1,r=void 0;try{for(var s,t=this.dataset[Symbol.iterator]();!(p=(s=t.next()).done);p=!0){var u=s.value,v=u.building,w=u.organisation,x=v.id+"-"+w.id;if(!o.has(x)){var y=0,z=v.name+" "+v.strasse_nr+" "+v.ort+" "+v.plz+" "+v.canton.kantonkuerzel+" "+w.name+" "+u.roomtype.typ;z=z.toLowerCase();for(var A=0;A<a.length;A++){var B=a[A];z.indexOf(B)>-1&&y++}y===a.length&&(o.set(x,u),c.systems.push(u))}if(c.systems.length===b)break}}catch(a){q=!0,r=a}finally{try{!p&&t.return&&t.return()}finally{if(q)throw r}}return c}}]),a}())||j),a("Search",k)}}}),System.register("alis/services/storage.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("Storage",e=function(){function a(){c(this,a),this.stores={local:localStorage,session:sessionStorage}}return d(a,[{key:"getItem",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";return JSON.parse(this.stores[b].getItem(a))}},{key:"setItem",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"local";this.stores[c].setItem(a,JSON.stringify(b))}}]),a}()),a("Storage",e)}}}),System.register("alis/pages/home.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","resize-observer-polyfill","aurelia-router","aurelia-framework","../services/config","../services/db","../services/state","../services/search","../services/storage","../models/building","../models/room-type","../models/system"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.Router},function(a){i=a.inject,j=a.bindable},function(a){k=a.Config},function(a){l=a.Database},function(a){m=a.State},function(a){n=a.Search},function(a){o=a.Storage},function(a){p=a.Building},function(a){q=a.RoomType},function(a){r=a.System}],execute:function(){a("Home",(s=i(h,l,o,n,k,m),t=j(),x=s((v=function(){function a(b,d,f,g,h,i){e(this,a),this.isSearching=!1,c(this,"state",w,this),this.router=b,this.db=d,this.storage=f,this.search=g,this.config=h,this.state=i,this.baseLayers=new Map;var j=!0,k=!1,l=void 0;try{for(var m,n=this.config.basemaps[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value;"google"===o.type&&this.baseLayers.set(o.id,L.gridLayer.googleMutant(o.config))}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}this.overlays=new Map,this.overlays.set("buildings",L.markerClusterGroup({maxClusterRadius:this.getMaxClusterRadius,iconCreateFunction:this.createClusterIcon})),this.overlays.set("marker",L.marker()),this.controls=new Map;var p=L.control.locate({showPopup:!1,locateControl:{}});p._start=p.start.bind(p),p._stop=p.stop.bind(p),p._setView=p.setView.bind(p),p.stop=this.stopGeolocation.bind(this),p.start=this.startGeolocation.bind(this),p.setView=this.setGeolocationView.bind(this),this.controls.set("locate",p)}return f(a,[{key:"attached",value:function(){var a=new g(this.resizeMap.bind(this)),b=this.overlays.get("buildings"),c=this.overlays.get("marker"),d=this.controls.get("locate"),e=this.storage.getItem("mapbounds"),f=this.storage.getItem("geolocation");this.map=L.map(this._map,{attributionControl:!1}),this.map.addLayer(this.baseLayers.get(this.state.baseLayerId)),this.map.addLayer(b),this.map.addControl(d),e?this.map.fitBounds(e):this.map.setView(this.config.map.center,this.config.map.zoom),f&&d.start(),this.map.on("moveend",this.updateMapView,this),c.on("click",this.onMarkerClick,this),b.on("click",this.onBuildingClick,this),b.on("dblclick",this.onBuildingDoubleClick,this),a.observe(this._map),this.buildings=this.db.query(r).groupByRelation(p).all(),this.categories=this.db.query(q).all(),this.db.sortByDistance(this.map.getCenter())}},{key:"onBuildingClick",value:function(a){this.selection===a.layer.data&&1===this.selection.systems.length?this.showInfo(this.selection.systems[0]):this.selection=a.layer.data}},{key:"onBuildingDoubleClick",value:function(a){this.selection=a.layer.data,1===this.selection.systems.length&&this.showInfo(this.selection.systems[0])}},{key:"onMarkerClick",value:function(a){this.selection&&1===this.selection.systems.length&&this.showInfo(this.selection.systems[0])}},{key:"deselect",value:function(){this.selection=null,this._selectionList.scrollTop=0}},{key:"updateMapView",value:function(a){var b=a.target.getBounds();this.storage.setItem("mapbounds",[[b.getSouth(),b.getWest()],[b.getNorth(),b.getEast()]])}},{key:"showMenu",value:function(){document.getElementById("menu").open()}},{key:"showSearch",value:function(){this.isSearching||(this.isSearching=!0,this._searchoverlay.scrollTop=0,this.db.sortByDistance(this.map.getCenter()),this.searchText=this.search.text,this.search.update(this.search.text),this.searchResults=this.search.results,this.searchText=this.search.text)}},{key:"cancelSearch",value:function(){this.isSearching=!1,this.searchText=this.search.text}},{key:"clearSearch",value:function(){this.isSearching?(this.search.applyFilter=!1,this.search.update(null),this.searchText=null,this.searchResults=this.search.results,this._searchinput.focus()):(this.search.reset(),this.buildings=this.db.query(r).groupByRelation(p).all(),this.selection=null,this.searchText=this.search.text,this.searchResults=this.search.results)}},{key:"showInfo",value:function(a){this.router.navigateToRoute("system",{id:a.id})}},{key:"searchCategory",value:function(a){this.isSearching=!1,this.buildings=this.db.query(r).filterBy("typID",a.id).groupByRelation(p).all(),this.search.filter={property:"typID",value:a.id},this.searchText=this.search.text=a.typ,this.selection=null,this.zoomToNearest()}},{key:"zoomToNearest",value:function(){var a=this.map.getCenter(),b=this.overlays.get("buildings"),c=L.GeometryUtil.closestLayer(this.map,b.getLayers(),a);if(!this.map.getBounds().contains(c.layer.getLatLng())){var d=L.latLngBounds(c.layer.getLatLng(),a);this.disableGeolocationTracking(),this.map.fitBounds(d,{maxZoom:this.map.getZoom(),padding:[40,40]})}}},{key:"onResultClick",value:function(a){var b=this,c=this.search.query.groupByRelation(p);this.isSearching=!1,this.buildings=c.all(),this.search.text=this.searchText,this.selection=null,this.map.once("moveend",function(){b.selection=c.getById(a.building.id)}),this.disableGeolocationTracking(),this.map.setView([a.building.lat,a.building.lng],17)}},{key:"onLocationResultClick",value:function(a){this.isSearching=!1;var b=this.search.query.groupByRelation(p);this.buildings=b.all(),this.search.text=this.searchText,this.selection=null,this.disableGeolocationTracking(),this.map.fitBounds(a.bounds)}},{key:"onSearch",value:function(){this.onSearchInput()}},{key:"onSearchInput",value:function(){var a=this,b=this._searchinput.value;this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){a.search.applyFilters&&(a.search.applyFilters=!1,a.search.update()),a.searchResults=a.search.execute(b)},500)}},{key:"startGeolocation",value:function(){var a=this.controls.get("locate");this.storage.setItem("geolocation",!0),a.isLocatingStart=!0,a._start()}},{key:"stopGeolocation",value:function(){var a=this.controls.get("locate");this.storage.setItem("geolocation",!1),a._stop()}},{key:"setGeolocationView",value:function(){var a=this.controls.get("locate");a.isLocatingStart?(a.isLocatingStart=!1,a.options.keepCurrentZoomLevel=!1,a.options.locateOptions.maxZoom=this.map.getZoom()<15?15:this.map.getZoom(),a._setView(),a.options.keepCurrentZoomLevel=!0,a.options.locateOptions.maxZoom=1/0):a._setView()}},{key:"disableGeolocationTracking",value:function(){this.controls.get("locate")._onDrag()}},{key:"resizeMap",value:function(){var a=this;this.selection&&this.map.once("moveend",function(){var b=a.overlays.get("marker");a.panToSelection({animate:!0}),b._bringToFront()}),this.map.invalidateSize({pan:!1})}},{key:"panToSelection",value:function(a){var b=L.latLng(this.selection.lat,this.selection.lng);this.map.getBounds().contains(b)||this.map.panTo(b,a)}},{key:"createBuildingMarker",value:function(a){var b=a.icon,c=void 0;return c=b?'<div style="background-color:'+b.color+'"><span class="ons-icon '+b.prefix+" "+b.prefix+"-"+b.name+'"></span></div>':"<div>"+a.systems.length+"</div>",L.marker([a.lat,a.lng],{icon:L.divIcon({className:"leaflet-building-icon",iconSize:28,html:c})})}},{key:"createClusterIcon",value:function(a){var b=a.getChildCount(),c=" marker-cluster-",d=22;return b<10?c+="small":b<100?(c+="medium",d=26):(c+="large",d=30),new L.DivIcon({html:"<div>"+b+"</div>",className:"marker-cluster"+c,iconSize:d})}},{key:"getMaxClusterRadius",value:function(a){return a<13?80:a<15?50:a<17?30:20}},{key:"selection",set:function(a){var b=this.overlays.get("marker");a?(b.setLatLng([a.lat,a.lng]),b.data=a,this.map.addLayer(b),this.panToSelection({animate:!1}),b._bringToFront(),this._selectionList.scrollTop=0):(this.map.removeLayer(b),b.data=null)},get:function(){return this.overlays.get("marker").data}},{key:"buildings",set:function(a){var b=this,c=this.overlays.get("buildings");c.clearLayers(),a.forEach(function(a){var d=b.createBuildingMarker(a);d.data=a,c.addLayer(d)})},get:function(){return this.overlays.get("buildings").getLayers().map(function(a){return a.data})}}]),a}(),w=d(v.prototype,"state",[t],{enumerable:!0,initializer:null}),u=v))||u)),a("Home",x)}}}),System.register("alis/pages/impressum.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",".page .page__background {\n  background-color: #fff;\n}\n\n.page h2 {\n  font-size: 17px;\n  font-weight: 500;\n}\n\n.page.page--material h2 {\n  font-size: 20px;\n}\n")}}}),System.register("alis/pages/impressum.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from ="./impressum.css"></require>\n  <ons-page class="page">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <div style="margin: 0 10px">\n      <p>\n        <strong>Adresse</strong><br/>\n        Verantwortlich für den Inhalt dieser App ist:<br/><br/>\n        IGGH Interessengemeinschaft Gehörlose und Hörbehinderte<br/>\n        Belpstrasse 24<br/>\n        3007 Bern\n      </p>\n      <h2>Disclaimer</h2>\n      <p>\n        <strong>Keine Garantie</strong><br/>\n        Die Inhalte dieser App stellen ein unverbindliches\n        Informationsangebot dar. Die IGGH gewährleistet weder deren Aktualität,\n        Richtigkeit, Zuverlässigkeit, Vollständigkeit noch deren Qualität.\n        Die Nutzung erfolgt auf eigenes Risiko der Besucherin oder des\n        Besuchers. Die IGGH haftet auf keinen Fall für Schäden oder\n        Folgeschäden materieller oder ideeller Art, die sich aus der Nutzung\n        oder Nichtnutzung der angebotenen Informationen, aus der\n        missbräuchlichen Verwendung oder als Folge von technischen Störungen\n        ergeben. Die IGGH behält sich die Veränderung oder Löschung von\n        Informationen jederzeit und ohne vorherige Ankündigung vor.<br/><br/>\n\n        <strong>Haftungsbeschränkung</strong><br/>\n        Die IGGH haftet für keinen direkten oder indirekten Schaden, der durch\n        den Zugriff oder die Nutzung dieser App oder der darin\n        veröffentlichten Informationen entstand.<br/><br/>\n\n        <strong>Verknüpfte Internetseiten</strong><br/>\n        Die IGGH überprüft keine der mit den IGGH-Internetseiten verknüpften\n        Seiten und übernimmt keine Haftung für deren Inhalt und für allfällige\n        angebotene Leistungen. Der Besuch solcher Seiten erfolgt auf eigenes\n        Risiko der Nutzerin / des Nutzers.<br/><br/>\n\n        <strong>Datenschutz</strong><br/>\n        Die IGGH behandelt die ihr überlassenen persönlichen Daten streng\n        vertraulich und schützt die Interessen der Nutzerinnen und Nutzer.\n        Persönliche Daten werden weder an Dritte verkauft noch weitergegeben.\n        Die IGGH bemüht sich in angemessener Weise, die Datenbanken vor\n        fremden Zugriffen, Verlusten und Missbrauch oder vor Fälschung zu\n        schützen. Die IGGH kann dafür aber keine Garantie übernehmen.<br/><br/>\n        Die Internetseite der IGGH ist grundsätzlich ohne Angaben von\n        Personalien zugänglich. In enger Zusammenarbeit mit den\n        Hosting-Partnern bemühen wir uns, die Datenbanken mit allen Mitteln\n        vor fremden Zugriffen, Verlusten, Missbrauch oder vor Fälschung zu\n        schützen. Beim Besuch registrieren die Webserver des Hosting-Providers\n        der IGGH unpersönliche Nutzungsdaten. Die Logfiles geben Auskunft über\n        die Anzahl Zugriffe auf die Homepage der IGGH. Die Nutzungsdaten\n        werden nicht mit persönlichen Daten verknüpft.<br/><br/>\n        Eine Ausnahme bildet die freiwillige Kontaktaufnahme mit uns. Alle\n        Dateien, die Sie uns übermitteln, werden streng vertraulich behandelt.\n        Wir erfassen und speichern sie nur soweit, wie es Ihre Anmeldung und\n        Anfrage erfordert. Der Zugang zu dieser App und die Übertragung\n        von E-Mails an uns sind unverschlüsselt. Es ist theoretisch möglich,\n        dass Dateien unvollständig oder von Dritten eingesehen werden könnten.\n        Aus diesem Grund bitten wir Sie, uns keine vertraulichen Daten per\n        E-Mail zu übermitteln. Anfragen, welche wir per E-Mail erhalten,\n        beantworten wir üblicherweise auch per E-Mail. Sollten Sie dies nicht\n        wünschen, bitten wir Sie, dies in Ihrer Anfrage anzumerken.<br/><br/>\n\n        <strong>Copyright</strong><br/>\n        Für sämtliche Inhalte dieser App (Bilder, Grafiken, Texte, Video\n        usw.) hat die IGGH das Urheberrecht (alle Rechte vorbehalten). Durch\n        das Herunterladen oder Kopieren von Inhalten, Bildern, Fotos und\n        anderen Dateien werden keinerlei Rechte bezüglich der Inhalte\n        übertragen. Für die Reproduktion und Weitergabe jeglicher Elemente ist\n        die schriftliche Zustimmung der IGGH im Voraus einzuholen.<br/><br/>\n\n        Copyright © IGGH Interessengemeinschaft, Gehörlose und Hörbehinderte<br/>\n        Belpstrasse 24, 3007 Bern\n      </p>\n    </div>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/impressum.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("Impressum",e=function(){function a(){c(this,a)}return d(a,[{key:"activate",value:function(a,b){this.title=b.title}}]),a}()),a("Impressum",e)}}}),System.register("alis/pages/sponsors.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <ons-page class="page">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <ons-list>\n      <ons-list-item repeat.for="sponsor of sponsors" modifier="longdivider" click.delegate="openWebsite(sponsor)">\n        <span class="center" style="padding-right:14px;">\n          <img if.bind="sponsor.logo" src="${sponsor.logo}" alt="${sponsor.title}" style="max-width:100%;max-height:120px;">\n          <span if.bind="!sponsor.logo" class="list-item__title">${sponsor.title}</span>\n        </span>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/sponsors.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../services/config"],function(a,b){"use strict";var c,d,e,f,g,h,i;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Config}],execute:function(){a("Sponsors",i=(g=e(f))(h=function(){function a(b){c(this,a),this.config=b}return d(a,[{key:"activate",value:function(a,b){this.title=b.title,this.sponsors=[{title:"pro audito schweiz",link:"http://www.proaudito.ch",logo:this.config.baseUrl+"/pictures/logo_pa_hoch.png"},{title:"Eidgenössische Büro für die Gleichstellung von Menschen mit Behinderung EBGB",link:"http://www.edi.admin.ch/ebgb",logo:this.config.baseUrl+"/pictures/logo_ebgb_hoch.png"},{title:"Denk an mich",link:"http://www.denkanmich.ch",logo:this.config.baseUrl+"/pictures/logo_dam_hoch.png"},{title:"Sonos",link:"http://www.sonos-info.ch",logo:this.config.baseUrl+"/pictures/logo_sonos_2015.png"},{title:"Oertli Stiftung",link:"http://www.oertlistiftung.ch/",logo:this.config.baseUrl+"/pictures/logo_oertli_stiftung.png"},{title:"Paul Hess Stiftung",link:"",logo:""},{title:"Katholische Kirche Region Bern",link:"http://www.kathbern.ch/",logo:this.config.baseUrl+"/pictures/logo_kathbe.png"}]}},{key:"openWebsite",value:function(a){a.link&&window.open(a.link,"_system")}}]),a}())||h),a("Sponsors",i)}}}),System.register("alis/pages/system/add.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",".address-list {\n  max-height: 150px;\n  overflow-y: scroll;\n}\n\n.image-upload {\n  margin-top: 8px;\n  width: 100%;\n}\n\nons-button.upload-button {\n  border: 1px dashed #ccc;\n  background-color: rgb(249, 249, 249);\n  color: #333;\n  height: 140px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-upload .upload-preview {\n  height: 140px;\n  width: 100%;\n  position: relative;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n\n.form ons-list-item .left {\n  align-items: start;\n}\n.form ons-list-item .left ons-icon {\n  line-height: 1.5em;\n}\n")}}}),System.register("alis/pages/system/add.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from="./add.css"></require>\n\n  <ons-page class="page-text">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n      <div class="right">\n        <ons-toolbar-button click.delegate="commit()">\n          <ons-icon icon="md-mail-send"></ons-icon>\n        </ons-toolbar-button>\n      </div>\n    </ons-toolbar>\n    <ons-list modifier="noborder" class="form">\n      <ons-list-header style="display:none;"></ons-list-header>\n      <ons-list-item modifier="nodivider" click.trigger="showPositionPage()">\n        <div class="left">\n          <ons-icon icon="ion-ios-location,material:md-pin" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="address" class="input-label">Adresse*</label>\n          <ons-input input-id="address" type="text" modifier="underbar" style="width:100%;" value.one-way="data.formatted_address" readonly="true"></ons-input>\n          <div class="error" if.bind="errors.address">${errors.address}</div>\n          <div style="width:100%;height:120px;position:relative;margin-top:12px;">\n            <leaflet-map fixed.bind="true" overlays.bind="overlays" center.bind="data.coordinates" bounds.bind="bounds" layer-control.bind="false" zoom-control.bind="false"></leaflet-map>\n            <div if.bind="!place" style="z-index:10000;background-color: rgba(0,0,0,0.5);color:#fff;position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;padding:16px;">\n              <div style="text-align:center;">Position auf der Karte markieren</div>\n            </div>\n          </div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="ion-camera,material:md-camera" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label class="input-label">Foto</label>\n          <ons-button if.bind="imageUrl" click.trigger="deleteImage()" modifier="quiet" style="position:absolute;right:6px;top:7px;">Löschen</ons-button>\n          <div class="image-upload">\n            <ons-button if.bind="!imageUrl" click.trigger="uploadImageClick()" modifier="quiet" class="upload-button">\n              <ons-icon icon="md-plus"></ons-icon>\n            </ons-button>\n            <div if.bind="imageUrl" class="upload-preview" css="background-image:url(${imageUrl});" click.trigger="uploadImageClick()">\n            </div>\n            <input type="file" ref="imageInputEl" show.bind="false" change.trigger="onImageChange()" />\n          </div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="md-comment-text" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="annotations" class="input-label">Bemerkung</label>\n          <textarea id="annotations" class="textarea" rows="4" style="width:100%;margin-top:8px;" value.bind="data.annotations"></textarea>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-header>Ihre Kontaktdaten</ons-list-header>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="ion-person, material:md-account" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="username" class="input-label">Name*</label>\n          <ons-input input-id="username" type="text" modifier="underbar" style="width:100%;" value.bind="data.username" input.trigger="validate($event)"></ons-input>\n          <div class="error" if.bind="errors.username">${errors.username}</div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="ion-email, material:md-email" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="useremail" class="input-label">E-Mail*</label>\n          <ons-input input-id="useremail" type="email" modifier="underbar" style="width:100%;" value.bind="data.useremail" input.trigger="validate($event)"></ons-input>\n          <div class="error" if.bind="errors.useremail">${errors.useremail}</div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n  <ons-page if.bind="positionPageVisible">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        Adresse\n      </div>\n      <div class="right">\n        <ons-toolbar-button disabled.bind="!place" click.trigger="onAcceptAddressClick()">\n          <ons-icon icon="md-check"></ons-icon>\n        </ons-toolbar-button>\n      </div>\n    </ons-toolbar>\n    <ons-list modifier="noborder" style="display:flex;flex-direction:column;height:100%;">\n      <ons-list-item modifier="nodivier">\n        <div class="center">\n          <ons-input input-id="address" type="text" value.one-way="place.name" modifier="underbar" style="width:100%;"\n                     ref="addressInputEl" input.trigger="onAddressChange($event) & debounce" blur.trigger="onAddressBlur() & debounce"\n                     focus.trigger="onAddressFocus()" placeholder="Suchen oder auf die Karte tippen...">\n          </ons-input>\n          <div style="position:relative;width:100%;">\n            <div style="position:absolute;top:0;right:0;left:0;z-index:20000;" class="popover--material__content" if.bind="addressListVisible">\n              <ons-list modifier="noborder" class="address-list">\n                <ons-list-item modifier="nodivider" tappable="true" repeat.for="item of addressList" click.delegate="onAddressListItemClick(item)">\n                  <div class="center">\n                    <div class="list-item__title">${item.structured_formatting.main_text}</div>\n                    <div class="list-item__subtitle">${item.structured_formatting.secondary_text}</div>\n                  </div>\n                </ons-list-item>\n              </ons-list>\n            </div>\n          </div>\n        </div>\n      </ons-list-item>\n      <ons-list-item style="flex:1;padding:0;" modifier="nodivier">\n        <div class="center" style="padding:0;">\n          <leaflet-map mapclick.trigger="onPositionMapClick($event)" view-model.ref="leafletMap" bounds.bind="bounds" overlays.bind="overlays" center.bind="center" style="flex:1;"></leaflet-map>\n        </div>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/system/add.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","aurelia-history","aurelia-fetch-client","onsenui","../../services/config","../../services/db","../../models/canton"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.inject,h=a.bindable},function(a){i=a.History},function(a){j=a.HttpClient},function(a){k=a.default},function(a){l=a.Config},function(a){m=a.Database},function(a){n=a.Canton}],execute:function(){a("Add",(o=g(i,l,m),p=h(),q=h(),r=h(),y=o((t=function(){function a(b,d,f){var g=this;e(this,a),this.overlays=[],this.positionPageVisible=!1,this.addressListVisible=!1,c(this,"coordinates",u,this),c(this,"bounds",v,this),c(this,"imageUrl",w,this),this.image=null,c(this,"place",x,this),this.data={name:"",formatted_address:"",street_number:"",postcode:"",location:"",canton:"",image:null,annotations:"",username:"",useremail:""},this.errors={},this.addressList=[],this.searchTypes=["art_gallery","bank","church","hindu_temple","hospital","insurance_agency","local_government_office","mosque","movie_theater","museum","pharmacy","police","post_office","school","stadium","synagogue","university"],this.history=b,this.config=d,this.db=f,this.http=new j,this.http.configure(function(a){a.useStandardConfiguration().withBaseUrl(g.config.baseUrl+"/db_add_system.php").withDefaults()}),this.autocompleteService=new google.maps.places.AutocompleteService,this.geocoder=new google.maps.Geocoder,this.placesService=new google.maps.places.PlacesService(document.createElement("div"))}return f(a,[{key:"activate",value:function(a,b){this.title=b.title}},{key:"showPositionPage",value:function(){this.history.history.pushState({},"",""),this.positionPageVisible=!0,window.addEventListener("popstate",this.onPositionPageBack.bind(this))}},{key:"onPositionPageBack",value:function(){this.positionPageVisible=!1,this.coordinates=this.data.coordinates,window.removeEventListener("popstate",this.onPositionPageBack.bind(this))}},{key:"onPositionMapClick",value:function(a){var b=this;this.coordinates=a.detail.latlng,this.center=this.coordinates,this.searchNearBy(this.coordinates,25).then(function(a){b.loadPlaceDetail(a.place_id)}).catch(function(){b.geocodeLocation(b.coordinates).then(function(a){b.loadPlaceDetail(a.place_id)}).catch(function(a){k.notification.alert("Nichts gefunden.",{title:"Für die gewählte Position konnte keine Adresse gefunden werden."})})})}},{key:"onAddressChange",value:function(a){var b=this,c=a.target.value;c.length>=3?this.queryAddressListItems(c).then(function(){b.showAddressList()}).catch(function(){b.hideAddressList()}):this.hideAddressList()}},{key:"onAddressBlur",value:function(){this.place&&(this.addressInputEl.value=this.place.name),this.hideAddressList()}},{key:"onAddressFocus",value:function(){this.showAddressList()}},{key:"onAddressListItemClick",value:function(a){var b=this;this.loadPlaceDetail(a.place_id).then(function(a){var c=a.geometry.viewport.toJSON();b.leafletMap.map.fitBounds([[c.north,c.east],[c.south,c.west]]),b.coordinates=a.geometry.location.toJSON()})}},{key:"showAddressList",value:function(){!this.addressListVisible&&this.addressList.length>0&&(this.addressListVisible=!0)}},{key:"hideAddressList",value:function(){this.addressListVisible=!1}},{key:"placeChanged",value:function(a){a&&this.queryAddressListItems(a.name)}},{key:"searchNearBy",value:function(a,b){var c=this;return new Promise(function(d,e){c.placesService.nearbySearch({location:a,radius:b},function(a,b){if(a){var f=a.find(function(a){return c.searchTypes.find(function(b){return a.types.indexOf(b)>-1})});f?d(f):e(b)}else e(b)})})}},{key:"geocodeLocation",value:function(a){var b=this;return new Promise(function(c,d){b.geocoder.geocode({location:a},function(a,b){"OK"===b?c(a[0]):d(b)})})}},{key:"queryAddressListItems",value:function(a){var b=this;return new Promise(function(c,d){var e=b.leafletMap.map.getCenter(),f=new google.maps.LatLng(e.lat,e.lng);b.autocompleteService.getPlacePredictions({input:a,location:f,radius:1e4,types:["address"]},function(a,d){"OK"===d?(b.addressList=a,c(a)):(b.addressList=[],c([]))})})}},{key:"loadPlaceDetail",value:function(a){var b=this;return new Promise(function(c,d){b.placesService.getDetails({placeId:a},function(a,e){b.place=a,null!==a?c(a):d(e)})})}},{key:"coordinatesChanged",value:function(a){this.overlays=a?[{type:"marker",latLng:L.latLng(a.lat,a.lng)}]:[]}},{key:"onAcceptAddressClick",value:function(){var a=this,b=this.place.geometry.viewport.toJSON();this.data.coordinates=this.coordinates,this.data.name=this.place.name||"",this.data.formatted_address=this.place.formatted_address,this.data.lat=this.coordinates.lat,this.data.lng=this.coordinates.lng,this.data.website=this.place.website||"",this.place.address_components.forEach(function(b){b.types.indexOf("postal_code")>-1?a.data.postcode=b.long_name:b.types.indexOf("route")>-1?a.data.street=b.long_name:b.types.indexOf("street_number")>-1?a.data.housenumber=b.long_name:b.types.indexOf("administrative_area_level_1")>-1?a.data.canton=a.db.query(n).get("name",b.short_name):b.types.indexOf("locality")>-1&&(a.data.location=b.long_name)}),this.bounds=[[b.north,b.east],[b.south,b.west]],this.errors.address=null,this.history.history.back()}},{key:"uploadImageClick",value:function(){this.imageInputEl.click()}},{key:"onImageChange",value:function(){var a=this.imageInputEl.files[0];a&&(this.image=a,this.imageUrl&&URL.revokeObjectURL(this.imageUrl),this.imageUrl=URL.createObjectURL(this.image))}},{key:"deleteImage",value:function(){URL.revokeObjectURL(this.imageUrl),this.imageUrl=null,this.image=null}},{key:"commit",value:function(){var a=this,b=new FormData;b.append("username",this.data.username),b.append("useremail",this.data.useremail),b.append("name",this.data.name),b.append("lat",this.data.lat),b.append("lng",this.data.lng),b.append("street_number",this.data.street+" "+this.data.housenumber),b.append("location",this.data.location),b.append("postcode",this.data.postcode),b.append("cantonId",this.data.canton?this.data.canton.id:null),b.append("website",this.data.website),b.append("annotations",this.data.annotations),b.append("image",this.image),this.http.fetch("",{method:"POST",body:b}).then(function(a){return a.json()}).then(function(b){200!==b.code?(a.errors=b.errors,a.showInvalidAlert(b.message)):a.showSuccessMessage()})}},{key:"showInvalidAlert",value:function(a){k.notification.alert(a,{title:"Fehlende Anlage melden"})}},{key:"showSuccessMessage",value:function(){var a=this;k.notification.alert("Ihre Daten wurden gesendet und werden überprüft.",{title:"Vielen Dank",callback:function(){a.history.navigateBack()}})}},{key:"validate",value:function(a){this.errors[a.target.id]=null}}]),a}(),u=d(t.prototype,"coordinates",[p],{enumerable:!0,initializer:null}),v=d(t.prototype,"bounds",[q],{enumerable:!0,initializer:null}),w=d(t.prototype,"imageUrl",[r],{enumerable:!0,initializer:null}),x=d(t.prototype,"place",[h],{enumerable:!0,initializer:function(){return null}}),s=t))||s)),a("Add",y)}}}),System.register("alis/pages/system/info.css!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",".room-plan-list {\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n}\n\n.room-plan-list ons-list-item {\n  width: 50vw;\n  height: 50vw;\n  padding: 14px 7px;\n}\n.room-plan-list ons-list-item.first {\n  padding-left: 14px;\n}\n.room-plan-list ons-list-item.last {\n  padding-right: 14px;\n}\n.room-plan-list.list--material ons-list-item {\n  width: 50vw;\n  height: 50vw;\n  padding: 16px 8px;\n}\n.room-plan-list.list--material ons-list-item.first {\n  padding-left: 16px;\n}\n.room-plan-list.list--material ons-list-item.last {\n  padding-right: 16px;\n}\n.room-plan-list ons-list-item .center {\n  margin: 0;\n  padding: 0;\n}\n\n.room-plan-list ons-list-item .image {\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center center;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #eee;\n  box-sizing: border-box;\n}\n")}}}),System.register("alis/pages/system/info.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <require from="./info.css"></require>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">${data.name}</div>\n    </ons-toolbar>\n    <div if.bind="data.photoUrl" css="background-image:url(\'${data.photoUrl}\');background-repeat:no-repeat;background-size:cover;background-position:center;width:100%;height:35%;">\n    </div>\n    <ons-list>\n      <ons-list-item if.bind="data.strasse_nr || data.plz || data.org" tappable>\n        <span class="left">\n          <ons-icon icon="ion-ios-location,material:md-pin" fixed-width="true"></ons-icon>\n        </span>\n        <span class="center">\n          ${data.building.name}<template if.bind="data.organisation.name && data.building.name">, </template>${data.organisation.name}<br/>\n          ${data.building.strasse_nr}, ${data.building.plz} ${data.building.ort}\n      </ons-list-item>\n      <ons-list-item if.bind="data.webadresse" click.trigger="openWebsite()" tappable modifier="chevron" >\n        <span class="left">\n          <ons-icon icon="md-globe" fixed-width="true"></ons-icon>\n        </span>\n        <span class="center">Website</span>\n      </ons-list-item>\n      <ons-list-header>\n        Höranlage\n      </ons-list-header>\n      <ons-list-item>\n        <span class="left" style="">\n          <img src="${data.technology.imageUrl}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          ${data.technology.title}\n        </span>\n      </ons-list-item>\n      <ons-list-item>\n        <span class="left" style="">\n          <img src="${getRatingImageUrl()}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          ${getRatingName()}\n        </span>\n      </ons-list-item>\n      <ons-list-item if.bind="data.bemerkung">\n        ${data.bemerkung}\n      </ons-list-item>\n      <ons-list-header>\n        Raumpläne\n      </ons-list-header>\n      <ons-list class="room-plan-list" if.bind="data.roomPlans.length > 0">\n        <ons-list-item modifier="nodivider" repeat.for="roomPlan of data.roomPlans"\n          tappable class="${$index%2 == 0 ? \'first\' : \'last\'}" click.delegate="showRoomPlan(roomPlan.id)">\n          <div class="center">\n            <div class="image" css="background-image: url(${roomPlan.url})"></div>\n          </div>\n        </ons-list-item>\n      </ons-list>\n      <ons-list-item if.bind="data.roomPlans.length == 0">\n        <div class="center">Keine Raumpläne verhanden</div>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n')}}}),System.register("alis/pages/system/info.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","aurelia-router","../../services/db","../../services/config","../../models/system"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject},function(a){f=a.Router},function(a){g=a.Database},function(a){h=a.Config},function(a){i=a.System}],execute:function(){a("Info",l=(j=e(f,g,h))(k=function(){function a(b,d,e){c(this,a),this.router=b,this.db=d,this.config=e}return d(a,[{key:"activate",value:function(a){this.data=this.db.query(i).getById(parseInt(a.id,10))}},{key:"openWebsite",value:function(){window.open(this.data.webadresse,"_system")}},{key:"hasRoomPlan",value:function(){return"transp.png"!==this.data.plan1_dateiname||"transp.png"!==this.data.plan2_dateiname}},{key:"showRoomPlan",value:function(a){this.router.navigateToRoute("system-plan",{id:this.data.id,plan:a})}},{key:"getRatingImageUrl",value:function(){var a=this.config.baseUrl+"/symbols/";switch(this.data.bewertung){case 1:a+="r32_green.png";break;case 2:a+="r32_yellow.png";break;default:a+="r32_white.png"}return a}},{key:"getRatingName",value:function(){var a="";switch(this.data.bewertung){case 1:a="Geprüfte Höranlage gemäss Norm";break;case 2:a="Geprüfte Höranlage nicht nach Norm";break;default:a="Nicht überprüfte Höranlage"}return a}}]),a}())||k),a("Info",l)}}}),System.register("alis/pages/system/plan.html!node_modules/systemjs-plugin-text/text.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">${data.name}</div>\n    </ons-toolbar>\n    <div ref="planmap" style="width:100%;height:100%;"></div>\n  </ons-page>\n</template>\n')}}}),System.register("alis/models/canton.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("Canton",e=function(){function a(b){c(this,a),Object.assign(this,b)}return d(a,[{key:"id",get:function(){return this.kantonID}},{key:"name",get:function(){return this.kantonkuerzel}}],[{key:"tablename",get:function(){return"cantons"}}]),a}()),a("Canton",e)}}}),System.register("alis/models/location.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("Location",e=function(){function a(b){c(this,a),Object.assign(this,b)}return d(a,null,[{key:"tablename",get:function(){return"locations"}}]),a}()),a("Location",e)}}}),System.register("alis/models/room-type.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e,f;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){e={1:{name:"building",prefix:"mki",color:"#2E7D32"},2:{name:"university",prefix:"mki",color:"#283593"},3:{name:"chapel",prefix:"mki",color:"#F9A825"},4:{name:"museum",prefix:"mki",color:"#F57C00"},5:{name:"court_house",prefix:"mki",color:"#AD1457"},6:{name:"document-text",prefix:"ion",color:"#9E9D24"},7:{name:"ios-people",prefix:"ion",color:"#6A1B9A"},8:{name:"cinema",prefix:"mki",color:"#C62828"},9:{name:"theatre",prefix:"mki",color:"#00838F"}},a("RoomType",f=function(){function a(b){c(this,a),Object.assign(this,b)}return d(a,[{key:"id",get:function(){return this.typID}},{key:"name",get:function(){return this.typ}},{key:"description",get:function(){return this.beschreibung}},{key:"icon",get:function(){return e[this.id]}}],[{key:"tablename",get:function(){return"roomtypes"}}]),a}()),a("RoomType",f)}}}),System.register("alis/services/config.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.default}],execute:function(){a("Config",d=function a(){c(this,a),this.baseUrl="https://epsilon.höranlagen.ch",this.basemaps=[{type:"google",id:"roadmap",title:"Standard",config:{type:"roadmap",styles:[{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]}]}},{type:"google",id:"satellite",title:"Satellit",config:{type:"satellite"}}],this.map={basemap:"roadmap",center:[46.801111,8.226667],zoom:7}}),a("Config",d)}}}),System.register("alis/models/technology.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../services/config"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.Container},function(a){f=a.Config}],execute:function(){g={1:{description:"Empfang induktiv (Modus/Programm des Hörgerätes auf T stellen)."},2:{description:"Empfang über Infrarot (mit Empfangsgerät und Halsschlaufe induktiv)."},3:{description:"Empfang über Funk (mit Empfangsgerät und Halsschlaufe induktiv)."}},a("Technology",h=function(){function a(b){c(this,a),Object.assign(this,b),Object.assign(this,g[this.id]),this.config=e.instance.get(f)}return d(a,[{key:"id",get:function(){return this.techID}},{key:"title",get:function(){return this.technologie}},{key:"imageUrl",get:function(){return this.config.baseUrl+"/symbols/"+this.title+".png"}}],[{key:"tablename",get:function(){return"technologies"}}]),a}()),a("Technology",h)}}}),System.register("alis/services/db.js",["node_modules/systemjs-plugin-babel/babel-helpers/slicedToArray.js","node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-fetch-client","aurelia-framework","./config","../models/building","../models/canton","../models/location","../models/organisation","../models/room-type","../models/system","../models/technology"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.HttpClient},function(a){g=a.inject},function(a){h=a.Config},function(a){i=a.Building},function(a){j=a.Canton},function(a){k=a.Location},function(a){l=a.Organisation},function(a){m=a.RoomType},function(a){n=a.System},function(a){o=a.Technology}],execute:function(){a("Database",r=(p=g(h))(q=function(){function a(b){var c=this;d(this,a),this.config=b,this.reset(),this.http=new f,this.http.configure(function(a){a.useStandardConfiguration().withBaseUrl(c.config.baseUrl+"/db_query.php?").withDefaults()})}return e(a,[{key:"reset",value:function(){this.indexes=new Map}},{key:"load",value:function(){var a=this,b=[j,m,n,o];return this.reset(),Promise.all(b.map(function(b){var c=b.tablename;return a.http.fetch("table="+c).then(function(a){return a.json()}).then(function(c){var d=a.createIndex(b);c.results.forEach(function(a){d.set(a[c.id],new b(a))})}).catch(function(c){a.createIndex(b)})})).then(function(){a.process()})}},{key:"createIndex",value:function(a){var b=a.tablename;return this.indexes.set(b,new Map),this.getIndex(a)}},{key:"getIndex",value:function(a){var b=a.tablename;return this.indexes.get(b)}},{key:"process",value:function(){var a=this.getIndex(n),b=this.createIndex(i),d=this.createIndex(l),e=this.createIndex(k),f=!0,g=!1,h=void 0;try{for(var m,o=a.entries()[Symbol.iterator]();!(f=(m=o.next()).done);f=!0){var p=c(m.value,2),q=p[1];q.buildingId=q.plz+"-"+q.strasse_nr+"-"+q.gebaeude,q.organisationId=""+q.organisation,q.locationId=q.ort.trim();var r=b.get(q.buildingId),s=d.get(q.organisationId),t=e.get(q.locationId);r||(r=new i({id:q.buildingId,name:q.gebaeude,lat:q.lat,lng:q.lng,strasse_nr:q.strasse_nr,plz:q.plz,ort:q.ort,cantonId:q.kantonID,canton:this.query(j).getById(q.kantonID)}),b.set(r.id,r)),t||(t=new k({id:q.locationId,name:q.locationId,plzs:[],bounds:L.latLngBounds()}),e.set(t.id,t)),s||(s=new l({id:q.organisationId,name:q.organisation}),d.set(s.id,s)),q.organisation=s,q.building=r,t.bounds.extend(L.latLng(q.lat,q.lng)),-1===t.plzs.indexOf(q.plz)&&t.plzs.push(q.plz)}}catch(a){g=!0,h=a}finally{try{!f&&o.return&&o.return()}finally{if(g)throw h}}}},{key:"query",value:function(a){return new s(this,a,this.getIndex(a))}},{key:"sortByDistance",value:function(a){var b=this.getIndex(n),c=Array.from(b.values()).sort(function(b,c){return a.distanceTo(L.latLng(b.lat,b.lng))-a.distanceTo(L.latLng(c.lat,c.lng))});b.clear();var d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;b.set(i.id,i)}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}}}]),a}())||q),a("Database",r),a("Query",s=function(){function a(b,c,e){d(this,a),this.db=b,this.model=c,this.index=e,this.records=new Map(this.index.entries())}return e(a,[{key:"get",value:function(a,b){var c=void 0,d=!0,e=!1,f=void 0;try{for(var g,h=this.records.values()[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;if(i[a]===b){c=i;break}}}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}},{key:"getById",value:function(a){return this.records.get(a)}},{key:"all",value:function(){return Array.from(this.records.values())}},{key:"filterBy",value:function(a,b){var d=new Map,e=!0,f=!1,g=void 0;try{for(var h,i=this.records.entries()[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=c(h.value,2),k=j[0],l=j[1];l[a]===b&&d.set(k,l)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}return this.records=d,this}},{key:"groupByRelation",value:function(a){var b=this.model.relations.get(a),d=this.db.query(a),e=new Map,f=new Map,g=!0,h=!1,i=void 0;try{for(var j,k=this.records.values()[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=l[b];f.has(m)||f.set(m,[]),f.get(m).push(l)}}catch(a){h=!0,i=a}finally{try{!g&&k.return&&k.return()}finally{if(h)throw i}}var n=!0,o=!1,p=void 0;try{for(var q,r=f.entries()[Symbol.iterator]();!(n=(q=r.next()).done);n=!0){var s=c(q.value,2),t=s[0],u=s[1],v=d.getById(t);v&&(v[this.model.tablename]=u,e.set(v.id,v))}}catch(a){o=!0,p=a}finally{try{!n&&r.return&&r.return()}finally{if(o)throw p}}return d.records=e,d}}]),a}()),a("Query",s)}}}),System.register("alis/models/building.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../services/db"],function(a,b){"use strict";var c,d,e,f,g;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.Container},function(a){f=a.Database}],execute:function(){a("Building",g=function(){function a(b){c(this,a),Object.assign(this,b),this.db=e.instance.get(f)}return d(a,[{key:"icon",get:function(){var a=this.roomtypes;return 1===a.length?a[0].icon:null}},{key:"roomtypes",get:function(){return this.systems.reduce(function(a,b){var c=b.roomtype;return-1===a.indexOf(c)&&a.push(c),a},[])}}],[{key:"tablename",get:function(){return"buildings"}}]),a}()),a("Building",g)}}}),System.register("alis/models/organisation.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("Organisation",e=function(){function a(b){c(this,a),Object.assign(this,b)}return d(a,null,[{key:"tablename",get:function(){return"organisations"}}]),a}()),a("Organisation",e)}}}),System.register("alis/models/system.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../services/db","../services/config","./room-type","./technology","./building","./organisation"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.Container},function(a){f=a.Database},function(a){g=a.Config},function(a){h=a.RoomType},function(a){i=a.Technology},function(a){j=a.Building},function(a){k=a.Organisation}],execute:function(){a("System",l=function(){function a(b){c(this,a),Object.assign(this,b),this.db=e.instance.get(f),this.config=e.instance.get(g)}return d(a,[{key:"id",get:function(){return this.anlageID}},{key:"name",get:function(){var a=(this.raum+" "+this.raumnummer).trim();return a||(a=this.building.name),a||(a=this.roomtype.name),a}},{key:"roomtype",get:function(){return this.db.query(h).getById(this.typID)}},{key:"technology",get:function(){return this.db.query(i).getById(this.techID)}},{key:"photoUrl",get:function(){var a=this.foto_dateiname;return a&&"transp.png"!==a?this.config.baseUrl+"/admin/images/image_front/"+a:null}},{key:"roomPlans",get:function(){var a=[];if("transp.png"!==this.plan1_dateiname){var b="image_room1",c={id:b+"_"+this.plan2_dateiname,value:this.plan1_dateiname,text:"transp.png"!==this.plan2_dateiname?"Raumplan "+(Object.keys(a).length+1):"Raumplan",url:this.config.baseUrl+"/admin/images/"+b+"/"+this.plan1_dateiname};a.push(c)}if("transp.png"!==this.plan2_dateiname){var d="image_room2",e={id:d+"_"+this.plan2_dateiname,value:this.plan2_dateiname,text:"transp.png"!==this.plan1_dateiname?"Raumplan "+(Object.keys(a).length+1):"Raumplan",url:this.config.baseUrl+"/admin/images/"+d+"/"+this.plan2_dateiname};a.push(e)}return a}}],[{key:"tablename",get:function(){return"systems"}},{key:"relations",get:function(){return new Map([[j,"buildingId"],[k,"organisationId"]])}}]),a}()),a("System",l)}}}),System.register("alis/pages/system/plan.js",["node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","aurelia-framework","../../services/db","../../services/config","../../models/system"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.inject,f=a.bindable},function(a){g=a.Database},function(a){h=a.Config},function(a){i=a.System}],execute:function(){a("Plan",l=(j=e(g,h))(k=function(){function a(b,d){c(this,a),this.db=b,this.config=d}return d(a,[{key:"activate",value:function(a){var b=this;return this.data=this.db.query(i).getById(parseInt(a.id,10)),new Promise(function(c,d){var e=b.data.roomPlans.find(function(b){return b.id===a.plan}),f=new Image;f.onload=function(){var a=256/f.width;b.layer=L.imageOverlay(e.url,[[0,0],[f.height*a,f.width*a]]),c()},f.src=e.url})}},{key:"attached",value:function(){this.map=L.map(this.planmap,{crs:L.CRS.Simple,attributionControl:!1,maxZoom:4}),this.map.addLayer(this.layer),this.map.fitBounds(this.layer.getBounds()),this.map.setMaxBounds(this.layer.getBounds())}}]),a}())||k),a("Plan",l)}}});