!function(e){e.$fuse$=e;e.pkg("default",{},function(t){return t.file("app.css",function(e,t,n,i,o){n.exports="/*\n  Search bar styles\n*/\n.toolbar.searchbar {\n  padding: 5px 10px 0;\n}\n\n.toolbar.searchbar.floating + .page__background + .page__content {\n    margin-top: -1px;\n    top: 0;\n}\n\n.toolbar.searchbar.toolbar--transparent .center {\n  box-shadow: 0 1px 5px rgba(0,0,0,.3);\n  border-color: transparent;\n}\n\n.toolbar.searchbar .toolbar-button {\n  color: #666;\n  margin: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  border: none;\n}\n.toolbar.searchbar.toolbar--material .toolbar-button--material {\n  color: #666;\n  margin: 0;\n  border: none;\n}\n.toolbar.searchbar.toolbar--material .toolbar-button--material .ons-icon,\n.toolbar.searchbar.toolbar--material .ons-icon  {\n  width: 22px;\n  font-size: 22px;\n  text-align: center;\n}\n.toolbar.searchbar .toolbar-button .ons-icon, .toolbar.searchbar .ons-icon {\n  width: 17px;\n  text-align: center;\n}\n\n.toolbar.searchbar .left, .toolbar.searchbar .right {\n  min-width: auto;\n  width: auto;\n}\n.toolbar.searchbar .center {\n  flex: 1;\n  display: flex;\n  height: 34px;\n  line-height: 34px;\n  border-radius: 4px;\n  background-color: #fff;\n  max-width: 100%;\n}\n.toolbar.searchbar.toolbar--material .center {\n  height: 46px;\n  line-height: 46px;\n}\n.toolbar.searchbar .search-input {\n  width: 100%;\n  height: 100%;\n  background-image: none;\n  background-color: transparent;\n  border: none;\n  font-size: 17px;\n  padding: 0 8px;\n  line-height: inherit;\n}\n\n/*\n  Simple card style\n*/\n.card {\n  margin: 10px;\n  /*border: 1px solid #ccc;*/\n  border-radius: 4px;\n  background-color: #fff;\n  padding: 10px;\n  box-shadow: 0 1px 5px rgba(0,0,0,.3);\n}\n\n/*\n  White background for normal text pages\n*/\n.page-text .page__background {\n  background-color: #fff;\n}\n\n/*\n  Material inputs without underbar\n*/\nons-select.no-underbar select.select-input--material {\n  background-image: none;\n  padding: 0;\n}\n\n/*\n  Forms\n*/\n.list-item .input-label {\n  font-size: 14px;\n  opacity: 0.75;\n  width: 100%;\n}\n.list-item .error {\n  padding-top: 8px;\n  color: #ee0000;\n  font-size: 12px;\n}\n\n/*\n  Map\n*/\n.leaflet-map-static {\n  pointer-events: none;\n}\n.leaflet-map-static .leaflet-pane img {\n  pointer-events: none;\n}\n.leaflet-control .zmdi {\n  font-size: 1.4em;\n  line-height: inherit;\n}\n\n/*\n  iOS fix\n*/\nons-button, ons-button.button, ons-toolbar-button, ons-list-item, ons-fab, ons-back-button {\n  cursor: pointer;\n}\n"}),t.file("app.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./app.css"></require>\n  <ons-splitter>\n    <ons-splitter-side id="menu" ref="_menu" side="left" collapse swipeable swipe-target-width="1">\n      <ons-page>\n        <ons-list modifier="noborder">\n          <ons-list-item repeat.for="nav of router.navigation" click.delegate="navigateTo(nav)" modifier="nodivider tappable">\n            <span class="center">${nav.title}</span>\n          </ons-list-item>\n        </ons-list>\n      </ons-page>\n    </ons-splitter-side>\n    <ons-splitter-content>\n      <ons-navigator></ons-navigator>\n    </ons-splitter-content>\n  </ons-splitter>\n</template>\n'}),t.file("app.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("./services/db"),c=t("./plugins/aurelia-messageformat"),d=function(){function e(e){this.db=e}return e.prototype.activate=function(){return this.db.load().then(function(){}).catch(function(){})},e.prototype.configureRouter=function(e,t){e.title="HÃ¶ranlagen",e.map([{route:["","home"],name:"home",moduleId:"./pages/home",nav:!1},{route:"quickstart",name:"quickstart",moduleId:"./pages/help/quickstart",title:c._("pages.help.quickstart.title"),nav:!0,settings:{}},{route:"help/reception",name:"help-reception",moduleId:"./pages/help/reception",nav:!0,title:c._("pages.help.reception.title"),settings:{}},{route:"help/video",name:"help-video",moduleId:"./pages/help/video",nav:!0,title:c._("pages.help.video.title"),settings:{}},{route:"help/symbols",name:"help-symbols",moduleId:"./pages/help/symbols",nav:!0,title:c._("pages.help.symbols.title"),settings:{}},{route:"add-system",name:"add-system",moduleId:"./pages/system/add",title:c._("pages.add-system.title"),nav:!0,settings:{}},{route:"impressum",name:"impressum",moduleId:"./pages/impressum",nav:!0,title:c._("pages.legal-notice.title"),settings:{}},{route:"system/:id",name:"system",moduleId:"./pages/system/info",nav:!1},{route:"system/:id/:plan",name:"system-plan",moduleId:"./pages/system/plan",nav:!1}]),this.router=t},e.prototype.navigateTo=function(e){this._menu.close(),this.router.navigateToRoute(e.config.name)},e=a([r.inject(l.Database),s("design:paramtypes",[Object])],e)}();e.App=d}),t.file("services/db.js",function(e,t,n,i,o){t("process");var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var c=t("aurelia-fetch-client"),d=t("aurelia-framework"),p=t("./config"),u=t("../models/building"),f=t("../models/canton"),h=t("../models/location"),g=t("../models/organisation"),m=t("../models/room-type"),b=t("../models/system"),y=t("../models/technology"),v=t("../models/rating"),x=t("../models/lang"),w=t("../plugins/aurelia-messageformat"),_=function(){function e(e){var t=this;this.config=e,this.reset(),this.httpClient=new c.HttpClient,this.httpClient.configure(function(e){e.useStandardConfiguration().withBaseUrl(t.config.baseUrl+"/db_query.php?").withDefaults()})}return e.prototype.reset=function(){this.indexes=new Map},e.prototype.load=function(){var e=this,t=[f.Canton,m.RoomType,b.System,y.Technology,x.Lang];return this.reset(),Promise.all(t.map(function(t){var n=t.tablename;return e.httpClient.fetch("table="+n).then(function(e){return e.json()}).then(function(n){var i=e.createIndex(t);n.results.forEach(function(e){i.set(e[n.id],new t(e))})}).catch(function(n){e.createIndex(t)})})).then(function(){e.process()})},e.prototype.createIndex=function(e){var t=e.tablename;return this.indexes.set(t,new Map),this.getIndex(e)},e.prototype.getIndex=function(e){var t=e.tablename;return this.indexes.get(t)},e.prototype.process=function(){var e,t,n,i,o=this.getIndex(b.System),a=this.getIndex(m.RoomType),s=this.createIndex(u.Building),c=this.createIndex(g.Organisation),d=this.createIndex(h.Location),p=this.createIndex(v.Rating);try{for(var y=r(a.entries()),_=y.next();!_.done;_=y.next()){var k=l(_.value,2)[1];k.name=w._("data."+m.RoomType.tablename+"."+k.id+".title")}}catch(t){e={error:t}}finally{try{_&&!_.done&&(t=y.return)&&t.call(y)}finally{if(e)throw e.error}}try{for(var j=r(o.entries()),O=j.next();!O.done;O=j.next()){var R=l(O.value,2)[1];switch(R.buildingId=R.plz+"-"+R.strasse_nr+"-"+R.gebaeude,R.organisationId=""+R.organisation,R.locationId=R.ort.trim(),R.lang=this.query(x.Lang).getById(R.langID),R.bewertung){case 1:case 2:R.ratingId=R.bewertung;break;default:R.ratingId=3}var P=s.get(R.buildingId),I=c.get(R.organisationId),C=d.get(R.locationId),S=p.get(R.ratingId);if(P||(P=new u.Building({id:R.buildingId,name:R.gebaeude,lat:R.lat,lng:R.lng,strasse_nr:R.strasse_nr,plz:R.plz,ort:R.ort,cantonId:R.kantonID,canton:this.query(f.Canton).getById(R.kantonID)}),s.set(P.id,P)),C||(C=new h.Location({id:R.locationId,name:R.locationId,plzs:[],bounds:L.latLngBounds()}),d.set(C.id,C)),I||(I=new g.Organisation({id:R.organisationId,name:R.organisation}),c.set(I.id,I)),!S){switch((S=new v.Rating({id:R.ratingId})).id){case 1:S.icon="r32_green.png";break;case 2:S.icon="r32_yellow.png";break;default:S.icon="r32_white.png"}p.set(S.id,S)}R.organisation=I,R.building=P,R.rating=S,C.bounds.extend(L.latLng(R.lat,R.lng)),-1===C.plzs.indexOf(R.plz)&&C.plzs.push(R.plz)}}catch(e){n={error:e}}finally{try{O&&!O.done&&(i=j.return)&&i.call(j)}finally{if(n)throw n.error}}},e.prototype.query=function(e){return new k(this,e,this.getIndex(e))},e.prototype.sortByDistance=function(e){var t,n,i=this.getIndex(b.System),o=Array.from(i.values()).sort(function(t,n){return e.distanceTo(L.latLng(t.lat,t.lng))-e.distanceTo(L.latLng(n.lat,n.lng))});i.clear();try{for(var a=r(o),s=a.next();!s.done;s=a.next()){var l=s.value;i.set(l.id,l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e=a([d.inject(p.Config),s("design:paramtypes",[Object])],e)}();e.Database=_;var k=function(){function e(e,t,n){this.db=e,this.model=t,this.index=n,this.records=new Map(this.index.entries())}return e.prototype.get=function(e,t){var n,i,o;try{for(var a=r(this.records.values()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l[e]===t){n=l;break}}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return n},e.prototype.getById=function(e){return this.records.get(e)},e.prototype.all=function(){return Array.from(this.records.values())},e.prototype.filterBy=function(e,t){var n,i,o=new Map;try{for(var a=r(this.records.entries()),s=a.next();!s.done;s=a.next()){var c=l(s.value,2),d=c[0],p=c[1];p[e]===t&&o.set(d,p)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return this.records=o,this},e.prototype.groupByRelation=function(e){var t,n,i,o,a=this.model.relations.get(e),s=this.db.query(e),c=new Map,d=new Map;try{for(var p=r(this.records.values()),u=p.next();!u.done;u=p.next()){var f=(m=u.value)[a];d.has(f)||d.set(f,[]),d.get(f).push(m)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}try{for(var h=r(d.entries()),g=h.next();!g.done;g=h.next()){var m,b=l(g.value,2),y=(f=b[0],b[1]);(m=s.getById(f))&&(m[this.model.tablename]=y,c.set(m.id,m))}}catch(e){i={error:e}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return s.records=c,s},e}();e.Query=k}),t.file("services/config.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("../plugins/aurelia-messageformat"),s=function(){this.baseUrl="https://hoeranlagen.ch",this.basemaps=[{type:"google",id:"roadmap",title:a._("default"),config:{type:"roadmap",styles:[{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]}]}},{type:"google",id:"satellite",title:a._("satellite"),config:{type:"satellite"}}],this.map={basemap:"roadmap",view:[[45.805829,7.338867],[47.813155,9.008789]]}};e.Config=s}),t.file("plugins/aurelia-messageformat/index.js",function(e,t,n,i,o){"use strict";var a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,r)}l((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=i[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-event-aggregator"),l=t("aurelia-framework"),c=t("aurelia-pal"),d=t("aurelia-templating-resources"),p=t("./i18n");e.I18N=p.I18N;var u=t("./utils");e.normalize=u.normalize,e.configure=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return n=new p.I18N(e.container.get(r.EventAggregator),e.container.get(d.BindingSignaler)),e.container.registerInstance(p.I18N,n),e.globalResources(c.PLATFORM.moduleName("./attributes")),[4,n.setup(t)];case 1:return i.sent(),[2]}})})},e._=function(e,t){return void 0===t&&(t=null),l.Container.instance.get(p.I18N).tr(e,t)}}),t.file("plugins/aurelia-messageformat/i18n.js",function(t,n,i,o,a){"use strict";var s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,r)}l((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=i[2&a[0]?"return":a[0]?"throw":"next"])&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[0,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var d=n("aurelia-event-aggregator"),p=n("aurelia-pal"),u=n("./utils"),f=/<|&#?\w+;/,h=function(){function t(e,t){this.catalogs={},this.options={language:"en",loadPath:"./locales/",languages:[],fallbackLanguage:"en",keySeparator:".",defaultContext:"",trimWhiteSpace:!0,preserveIndentation:!1,replaceNewLines:" "},this.ea=e,this.signaler=t}return t.prototype.setup=function(e){return s(this,void 0,void 0,function(){var t=this;return r(this,function(n){switch(n.label){case 0:return this.options=Object.assign(this.options,e),[4,Promise.all(this.options.languages.map(function(e){return t.loadCatalog(e)}))];case 1:return n.sent(),this.setLocale(this.options.language),[2]}})})},t.prototype.loadCatalog=function(t){var n=this;return new Promise(function(i,o){var a=p.PLATFORM.moduleName(""+n.options.loadPath+t+".js");e.import(a,function(e){n.catalogs[t]=e,i()})})},t.prototype.setLocale=function(e){var t=this.getLocale();this.locales=u.negotiateLanguages([e].concat(navigator.languages||[]),this.options.languages,this.options.fallbackLanguage),this.locale=this.locales[0],this.ea.publish("i18n:locale:changed",{oldValue:t,newValue:this.locale}),this.signaler.signal("aurelia-translation-signal")},t.prototype.getLocale=function(){return this.locale},t.prototype.getParams=function(e){if(e.au&&e.au["i18n-params"]&&e.au["i18n-params"].viewModel)return e.au["i18n-params"].viewModel.value},t.prototype.updateTranslations=function(e){if(e&&e.querySelectorAll){if(e.hasAttribute("i18n")){var t=this.getParams(e),n=e.getAttribute("i18n"),i=this.tr(n,t);f.test(i)?e.innerHTML=i:e.textContent=i}if(e.hasAttribute("i18n-attrs")){t=this.getParams(e);var o=e.getAttribute("i18n-attrs").split(";");try{for(var a=l(o),s=a.next();!s.done;s=a.next()){var r=s.value,d=c(r.split(":"),2),p=d[0];n=d[1],i=this.tr(n,t);e.setAttribute(p,i)}}catch(e){m={error:e}}finally{try{s&&!s.done&&(b=a.return)&&b.call(a)}finally{if(m)throw m.error}}}try{for(var u=l(e.querySelectorAll("[i18n]")),h=u.next();!h.done;h=u.next()){var g=h.value;this.updateTranslations(g)}}catch(e){y={error:e}}finally{try{h&&!h.done&&(v=u.return)&&v.call(u)}finally{if(y)throw y.error}}var m,b,y,v}},t.prototype.tr=function(e,t){var n,i,o;try{for(var a=l(this.locales),s=a.next();!s.done;s=a.next()){var r=[s.value,e],c=u.getProp(this.catalogs,r.join(this.options.keySeparator));if("function"==typeof c){n=c(t);break}}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return n||e},t.inject=[d.EventAggregator],t}();t.I18N=h}),t.file("plugins/aurelia-messageformat/utils.js",function(e,t,n,i,o){"use strict";var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(e,"__esModule",{value:!0}),e.negotiateLanguages=function(e,t,n){var i,o,s,r,l,c,d=[],p=[];try{for(var u=a(e),f=u.next();!f.done;f=u.next())if((b=f.value).indexOf("-")>0){var h=b.split("-")[0];e.indexOf(h)<0&&p.push(h)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}try{for(var g=a(e),m=g.next();!m.done;m=g.next()){var b=m.value;t.indexOf(b)>-1&&d.indexOf(b)<0&&d.push(b)}}catch(e){s={error:e}}finally{try{m&&!m.done&&(r=g.return)&&r.call(g)}finally{if(s)throw s.error}}try{for(var y=a(p),v=y.next();!v.done;v=y.next()){var x=v.value;t.indexOf(x)>-1&&d.indexOf(x)<0&&d.push(x)}}catch(e){l={error:e}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}return d.indexOf(n)<0&&d.push(n),d},e.getProp=function(e,t){for(var n=Array.isArray(t)?t:t.split("."),i=n.length,o=0;e&&o<i;)e=e[n[o++]];return o&&o===i?e:void 0}}),t.file("models/building.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aurelia-framework"),s=t("../services/db"),r=function(){function e(e){Object.assign(this,e),this.db=a.Container.instance.get(s.Database)}return Object.defineProperty(e,"tablename",{get:function(){return"buildings"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){var e=this.roomtypes;return 1===e.length?e[0].icon:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomtypes",{get:function(){return this.systems.reduce(function(e,t){var n=t.roomtype;return-1===e.indexOf(n)&&e.push(n),e},[])},enumerable:!0,configurable:!0}),e}();e.Building=r}),t.file("models/canton.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e,"tablename",{get:function(){return"cantons"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.kantonID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.kantonkuerzel},enumerable:!0,configurable:!0}),e}();e.Canton=a}),t.file("models/location.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e,"tablename",{get:function(){return"locations"},enumerable:!0,configurable:!0}),e}();e.Location=a}),t.file("models/organisation.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e,"tablename",{get:function(){return"organisations"},enumerable:!0,configurable:!0}),e}();e.Organisation=a}),t.file("models/room-type.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={1:{name:"building",prefix:"mki",color:"#2E7D32"},2:{name:"university",prefix:"mki",color:"#283593"},3:{name:"chapel",prefix:"mki",color:"#F9A825"},4:{name:"museum",prefix:"mki",color:"#F57C00"},5:{name:"court_house",prefix:"mki",color:"#AD1457"},6:{name:"document-text",prefix:"ion",color:"#9E9D24"},7:{name:"ios-people",prefix:"ion",color:"#6A1B9A"},8:{name:"cinema",prefix:"mki",color:"#C62828"},9:{name:"theatre",prefix:"mki",color:"#00838F"}},s=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e,"tablename",{get:function(){return"roomtypes"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.typID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.beschreibung},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return a[this.id]},enumerable:!0,configurable:!0}),e}();e.RoomType=s}),t.file("models/system.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aurelia-framework"),s=t("../services/db"),r=t("../services/config"),l=t("./room-type"),c=t("./technology"),d=t("./building"),p=t("./organisation"),u=t("../plugins/aurelia-messageformat"),f=function(){function e(e){Object.assign(this,e),this.db=a.Container.instance.get(s.Database),this.config=a.Container.instance.get(r.Config),this.i18n=a.Container.instance.get(u.I18N)}return Object.defineProperty(e,"tablename",{get:function(){return"systems"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"relations",{get:function(){return new Map([[d.Building,"buildingId"],[p.Organisation,"organisationId"]])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.anlageID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){var e=(this.raum+" "+this.raumnummer).trim();return e||(e=this.building.name),e||(e=this.roomtype.name),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotation",{get:function(){var e=this.i18n.getLocale();return this.lang[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomtype",{get:function(){return this.db.query(l.RoomType).getById(this.typID)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"technology",{get:function(){return this.db.query(c.Technology).getById(this.techID)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"photoUrl",{get:function(){var e=this.foto_dateiname;return e&&"transp.png"!==e?this.config.baseUrl+"/admin/images/image_front/"+e:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomPlans",{get:function(){var e=[];if("transp.png"!==this.plan1_dateiname){var t={id:(n="image_room1")+"_"+this.plan2_dateiname,value:this.plan1_dateiname,text:"transp.png"!==this.plan2_dateiname?"Raumplan "+(Object.keys(e).length+1):"Raumplan",url:this.config.baseUrl+"/admin/images/"+n+"/"+this.plan1_dateiname};e.push(t)}if("transp.png"!==this.plan2_dateiname){var n;t={id:(n="image_room2")+"_"+this.plan2_dateiname,value:this.plan2_dateiname,text:"transp.png"!==this.plan1_dateiname?"Raumplan "+(Object.keys(e).length+1):"Raumplan",url:this.config.baseUrl+"/admin/images/"+n+"/"+this.plan2_dateiname};e.push(t)}return e},enumerable:!0,configurable:!0}),e}();e.System=f}),t.file("models/technology.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aurelia-framework"),s=t("../services/config"),r=t("../plugins/aurelia-messageformat"),l=function(){function e(e){Object.assign(this,e),this.config=a.Container.instance.get(s.Config)}return Object.defineProperty(e,"tablename",{get:function(){return"technologies"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.techID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return r._("data."+e.tablename+"."+this.id+".title")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return r._("data."+e.tablename+"."+this.id+".description")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this.config.baseUrl+"/symbols/"+this.technologie+".png"},enumerable:!0,configurable:!0}),e}();e.Technology=l}),t.file("models/rating.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aurelia-framework"),s=t("../services/config"),r=t("../plugins/aurelia-messageformat"),l=function(){function e(e){Object.assign(this,e),this.config=a.Container.instance.get(s.Config)}return Object.defineProperty(e.prototype,"title",{get:function(){return r._("data.ratings."+this.id+".title")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return r._("data.ratings."+this.id+".description")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortDescription",{get:function(){return r._("data.ratings."+this.id+".description-short")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this.config.baseUrl+"/symbols/"+this.icon},enumerable:!0,configurable:!0}),e}();e.Rating=l}),t.file("models/lang.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e,"tablename",{get:function(){return"lang"},enumerable:!0,configurable:!0}),e}();e.Lang=a}),t.file("components/leaflet-layer-control.css",function(e,t,n,i,o){n.exports="leaflet-layer-control ons-popover {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 99999;\n}\n"}),t.file("components/leaflet-layer-control.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./leaflet-layer-control.css"></require>\n\n  <ons-popover ref="layerControlEl" direction="down" cover-target cancelable modifier="material">\n    <ons-list>\n      <ons-list-header style="display:flex;flex-direction:row;align-items:center;padding-right:0;">\n        <span style="flex:1;" i18n="map-type"></span>\n        <ons-button modifier="quiet" click.delegate="hideLayerControl()" style="color:inherit;">\n          <ons-icon icon="md-close" fixed-width="true"></ons-icon>\n        </ons-button>\n      </ons-list-header>\n      <ons-list-item repeat.for="baseLayer of config.basemaps" click.delegate="changeBaseLayer(baseLayer.id)" tappable>\n        <div class="center">\n          ${baseLayer.title}\n        </div>\n        <div class="right">\n          <ons-icon icon="fa-check" if.bind="baseLayer.id === state.baseLayerId"></ons-icon>\n        </div>\n      </ons-list-item>\n    </ons-list>\n  </ons-popover>\n</template>\n'}),t.file("components/leaflet-layer-control.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(e,"__esModule",{value:!0});var l=t("aurelia-framework"),c=t("../services/storage"),d=t("../services/config"),p=t("../services/state"),u=function(){function e(e,t,n,i){this.el=e,this.config=t,this.state=n,this.baseLayers=new Map,this.overlays=new Map;try{for(var o=r(this.config.basemaps),a=o.next();!a.done;a=o.next()){var s=a.value;"google"===s.type&&this.baseLayers.set(s.id,L.gridLayer.googleMutant(s.config))}}catch(e){l={error:e}}finally{try{a&&!a.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}var l,c;this.button=L.easyButton("zmdi zmdi-layers",this.showLayerControl.bind(this),{position:"topright"})}return e.prototype.mapChanged=function(e){this.map&&this.button.addTo(this.map)},e.prototype.showLayerControl=function(){this.layerControlEl.show(this.button.getContainer())},e.prototype.hideLayerControl=function(){this.layerControlEl.hide()},e.prototype.changeBaseLayer=function(e){var t=this.state.baseLayerId;e!==t&&(this.map.removeLayer(this.baseLayers.get(t)),this.map.addLayer(this.baseLayers.get(e)),this.state.baseLayerId=e)},a([l.bindable(),s("design:type",Object)],e.prototype,"map",void 0),e=a([l.inject(Element,d.Config,p.State,c.Storage),s("design:paramtypes",[Object,Object,Object,Object])],e)}();e.LeafletLayerControlCustomElement=u}),t.file("services/storage.js",function(e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(){this.stores={local:localStorage,session:sessionStorage}}return e.prototype.getItem=function(e,t){return void 0===t&&(t="local"),JSON.parse(this.stores[t].getItem(e))},e.prototype.setItem=function(e,t,n){void 0===n&&(n="local"),this.stores[n].setItem(e,JSON.stringify(t))},e}();e.Storage=a}),t.file("services/state.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("./config"),c=t("./storage"),d=function(){function e(e,t){this.config=e,this.storage=t,this.baseLayerId=this.config.map.basemap}return Object.defineProperty(e.prototype,"mapBounds",{get:function(){var e=this.storage.getItem("mapbounds")||this.config.map.view;return L.latLngBounds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mapCenter",{get:function(){return this.mapBounds.getCenter()},enumerable:!0,configurable:!0}),e=a([r.inject(l.Config,c.Storage),s("design:paramtypes",[Object,Object])],e)}();e.State=d}),t.file("components/leaflet-map.css",function(e,t,n,i,o){n.exports="leaflet-map, leaflet-map .leaflet-map {\n  width: 100%;\n  height: 100%;\n}\n\nleaflet-map.leaflet-map-fixed .leaflet-map {\n  pointer-events: none;\n}\n\nleaflet-map.leaflet-map-fixed .leaflet-map img {\n  pointer-events: none;\n}\n\nleaflet-map .leaflet-layer-control {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 99999;\n}\n\nleaflet-map .leaflet-button-plain {\n  background-color: #fff;\n  color: #333;\n}\n\nleaflet-map .easy-button-container .easy-button-button {\n  padding: 0;\n}\n"}),t.file("components/leaflet-map.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./leaflet-map.css"></require>\n\n  <div ref="mapContainer" class="leaflet-map"></div>\n  <leaflet-layer-control map.bind="map" if.bind="layerControl"></leaflet-layer-control>\n</template>\n'}),t.file("components/leaflet-map.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(e,"__esModule",{value:!0});var l=t("aurelia-framework"),c=t("../services/storage"),d=t("../services/config"),p=t("../services/state"),u=function(){function e(e,t,n,i){this.mapOptions={attributionControl:!1},this.fixed=!1,this.layerControl=!0,this.zoomControl=!0,this.el=e,this.config=t,this.state=n,this.storage=i,this.baseLayers=new Map,this._overlays=[];try{for(var o=r(this.config.basemaps),a=o.next();!a.done;a=o.next()){var s=a.value;"google"===s.type&&this.baseLayers.set(s.id,L.gridLayer.googleMutant(s.config))}}catch(e){l={error:e}}finally{try{a&&!a.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}var l,c}return e.prototype.attached=function(){this.bounds||(this.bounds=L.latLngBounds(this.state.mapBounds)),this.mapOptions.zoomControl=this.zoomControl,this.map||(this.map=L.map(this.mapContainer,this.mapOptions)),this.map.addLayer(this.baseLayers.get(this.state.baseLayerId)),this.bounds?this.map.fitBounds(this.bounds):this.map.setView(this.config.map.center,this.config.map.zoom),this.updateOverlays(),this.map.on("click",this.onMapClick.bind(this))},e.prototype.centerChanged=function(e){e&&this.map.setView(e,this.map.getZoom())},e.prototype.boundsChanged=function(e){e&&this.map&&this.map.fitBounds(e)},e.prototype.fixedChanged=function(e){var t="leaflet-map-fixed";!0===e?this.el.classList.add(t):this.el.classList.remove(t)},e.prototype.overlaysChanged=function(e,t){this.map&&this.updateOverlays()},e.prototype.updateOverlays=function(){var e,t,n,i,o=this.overlays||[];try{for(var a=r(this._overlays),s=a.next();!s.done;s=a.next()){var l=s.value;this.map.removeLayer(l)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}try{for(var c=r(o),d=c.next();!d.done;d=c.next()){var p=d.value;l=void 0;"marker"===p.type&&(l=L.marker(p.latLng).addTo(this.map)),l.data=p,this._overlays.push(l)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},e.prototype.showLayerControl=function(){this.layerControlEl.show(this.layerControlTargetEl)},e.prototype.hideLayerControl=function(){this.layerControlEl.hide()},e.prototype.changeBaseLayer=function(e){var t=this.state.baseLayerId;e!==t&&(this.map.removeLayer(this.baseLayers.get(t)),this.map.addLayer(this.baseLayers.get(e)),this.state.baseLayerId=e)},e.prototype.onMapClick=function(e){var t=new CustomEvent("mapclick",{detail:e});this.el.dispatchEvent(t)},a([l.bindable(),s("design:type",Object)],e.prototype,"center",void 0),a([l.bindable(),s("design:type",Object)],e.prototype,"bounds",void 0),a([l.bindable(),s("design:type",Object)],e.prototype,"fixed",void 0),a([l.bindable(),s("design:type",Object)],e.prototype,"layerControl",void 0),a([l.bindable(),s("design:type",Object)],e.prototype,"zoomControl",void 0),a([l.bindable(),s("design:type",Object)],e.prototype,"overlays",void 0),e=a([l.inject(Element,d.Config,p.State,c.Storage),s("design:paramtypes",[Object,Object,Object,Object])],e)}();e.LeafletMap=u}),t.file("main.js",function(e,t,n,i,o){var a=t("process");Object.defineProperty(e,"__esModule",{value:!0}),t("whatwg-fetch");var s=t("aurelia-pal");e.configure=function(e){var t=function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var o=t[i].split("=");if(void 0===n[o[0]])n[o[0]]=decodeURIComponent(o[1]);else if("string"==typeof n[o[0]]){var a=[n[o[0]],decodeURIComponent(o[1])];n[o[0]]=a}else n[o[0]].push(decodeURIComponent(o[1]))}return n}(location.search.substring(1));e.use.basicConfiguration().history().plugin(s.PLATFORM.moduleName("./plugins/aurelia-messageformat"),{language:t.lang||navigator.language||"en",languages:["en","de","fr","it"],fallbackLanguage:"en"}).plugin("aurelia-onsenui").globalResources([s.PLATFORM.moduleName("./components/leaflet-layer-control"),s.PLATFORM.moduleName("./components/leaflet-map")]),"development"===a.env.NODE_ENV&&e.use.developmentLogging(),e.start().then(function(){return e.setRoot()})}}),t.file("pages/help/quickstart.html",function(e,t,n,i,o){n.exports='<template>\n  <ons-page class="page-text">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <div style="margin:10px 10px;" i18n="pages.help.quickstart.content"></div>\n  </ons-page>\n</template>\n'}),t.file("pages/help/quickstart.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("../../services/config"),c=function(){function e(e){this.config=e}return e.prototype.activate=function(e,t){this.title=t.title,this.image={src:this.config.baseUrl+"/images/InduktiveAntenne.jpg",description:""}},e=a([r.inject(l.Config),s("design:paramtypes",[Object])],e)}();e.Quickstart=c}),t.file("pages/help/reception.html",function(e,t,n,i,o){n.exports='<template>\n  <ons-page class="page-text">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <div>\n      <img width="100%" src="${image.src}" alt="${image.description}">\n      <div style="text-align:right;font-size:0.75em;margin-right:10px;"><span i18n="image"></span>: Phonak AG</div>\n    </div>\n    <div style="margin:0 10px 10px;">\n      <div i18n="pages.help.reception.content"></div>\n      <p>\n        <a i18n="links.metas.title" i18n-attrs="href:links.metas.url" target="blank"></a>        \n      </p>\n  </ons-page>\n</template>\n'}),t.file("pages/help/reception.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("../../services/config"),c=function(){function e(e){this.config=e}return e.prototype.activate=function(e,t){this.title=t.title,this.image={src:this.config.baseUrl+"/pictures/AudeoB_312T_Rend.jpg",description:""}},e=a([r.inject(l.Config),s("design:paramtypes",[Object])],e)}();e.Reception=c}),t.file("pages/help/symbols.html",function(e,t,n,i,o){n.exports='<template>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <ons-list>\n      <ons-list-header i18n="technologies"></ons-list-header>\n      <ons-list-item repeat.for="technology of technologies">\n        <span class="left" style="align-self:flex-start;">\n          <img src="${technology.imageUrl}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          <span class="list-item__title">${technology.title}</span>\n          <span class="list-item__subtitle">${technology.description}</span>\n        </span>\n      </ons-list-item>\n    </ons-list>\n    <ons-list>\n      <ons-list-header i18n="ratings"></ons-list-header>\n      <ons-list-item repeat.for="rating of ratings">\n        <span class="left" style="align-self:flex-start;">\n          <img src="${rating.imageUrl}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          <span class="list-item__title">${rating.title}</span>\n          <span class="list-item__subtitle">${rating.description}</span>\n        </span>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n'}),t.file("pages/help/symbols.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("../../services/db"),c=t("../../services/config"),d=t("../../models/technology"),p=t("../../models/rating"),u=function(){function e(e,t){this.db=e,this.config=t}return e.prototype.activate=function(e,t){this.title=t.title,this.technologies=this.db.query(d.Technology).all(),this.ratings=this.db.query(p.Rating).all().sort(function(e,t){return e.id>t.id})},e=a([r.inject(l.Database,c.Config),s("design:paramtypes",[Object,Object])],e)}();e.Symbols=u}),t.file("pages/help/video.css",function(e,t,n,i,o){n.exports=".video-container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  /* 16:9 */\n  padding-bottom: 56.25%;\n}\n.video-container iframe {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n"}),t.file("pages/help/video.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./video.css"></require>\n  <ons-page>\n   <ons-toolbar>\n    <div class="left">\n      <ons-back-button></ons-back-button>\n    </div>\n    <div class="center">\n      ${title}\n    </div>\n  </ons-toolbar>\n  <div class="video-container">\n    <iframe src.bind="url" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>\n  </div>\n  </ons-page>\n</template>\n'}),t.file("pages/help/video.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("../../plugins/aurelia-messageformat"),c=function(){function e(e){this.i18n=e,this.locale=e.getLocale(),this.url="https://www.youtube.com/embed/pOHBhKu7pO8?hl="+this.locale+"&&cc_load_policy=1"}return e.prototype.activate=function(e,t){this.title=t.title},e=a([r.inject(l.I18N),s("design:paramtypes",[Object])],e)}();e.Video=c}),t.file("pages/home.css",function(e,t,n,i,o){n.exports=".leaflet-building-icon div {\n  background-color: #4E342E;\n  border-radius: 50%;\n  border: 1.5px solid #ffffff;\n  line-height: 25px;\n  font-size: 12px;\n  color: #ffffff;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n.leaflet-building-icon div span {\n  color: #fff;\n}\n.leaflet-building-icon .ion {\n  font-size: 17px;\n  line-height: 1em;\n  vertical-align: -2px;\n}\n.leaflet-building-icon .mki {\n  font-size: 20px;\n  line-height: 1em;\n}\n.leaflet-building-icon .mki.mki-chapel,\n.leaflet-building-icon .mki.mki-building {\n  vertical-align: -2px;\n  font-size: 22px;\n}\n.leaflet-building-icon .mki.mki-museum {\n  vertical-align: -1px;\n}\n.leaflet-building-icon .mki.mki-court_house {\n  vertical-align: -2px;\n}\n.leaflet-building-icon .mki.mki-theatre {\n  vertical-align: -3px;\n}\n\n.marker-cluster-small {\n  line-height: 22px;\n}\n.marker-cluster-medium {\n  line-height: 26px;\n}\n.marker-cluster-large {\n  line-height: 30px;\n}\n\n.marker-cluster {\n\tbackground-clip: padding-box;\n\tborder-radius: 100%;\n  font-size: 12px;\n  background-color: rgba(78, 56, 42, 0.6);\n  border: 5px solid rgba(78, 56, 42, 0.2);\n}\n.marker-cluster div {\n\ttext-align: center;\n\tborder-radius: 15px;\n  color: #fff;\n  line-height: inherit;\n}\n\n.leaflet-container .leaflet-google-mutant .gmnoprint {\n  display: none;\n}\n.leaflet-container .leaflet-google-mutant .gmnoprint.gm-style-cc {\n  display: inherit;\n}\n\n.leaflet-container .easy-button-container .easy-button-button {\n  padding: 0;\n}\n\n.category-item {\n  width: 33%;\n  text-align:center;\n}\n.category-item .category-label {\n  padding-top:5px;\n  font-size:13px;\n  max-width:100%;\n  -ms-hyphens: auto;\n  -webkit-hyphens: auto;\n  hyphens: auto;\n  color: #666;\n}\n\n.category-item .ons-icon {\n  font-size: 30px;\n}\n.category-item .ons-icon.mki {\n  font-size: 34px;\n}\n.category-item .ons-icon.mki.mki-chapel,\n.category-item .ons-icon.mki.mki-building {\n  font-size: 38px;\n  margin-top: 2px;\n}\n.category-item .ons-icon.mki.mki-museum,\n.category-item .ons-icon.mki.mki-court_house {\n  margin-top: 2px;\n}\n\n.category-item .ons-icon.mki.mki-theatre {\n  margin-top: 3px;\n}\n"}),t.file("pages/home.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./home.css"></require>\n  <ons-page>\n    <ons-toolbar modifier="" class="searchbar ${isSearching ? \'toolbar--transparent\' : \'\'}">\n      <div class="left">\n      </div>\n      <div class="center">\n        <ons-toolbar-button if.bind="!isSearching" click.delegate="showMenu()">\n          <ons-icon icon="ion-navicon, material:md-menu"></ons-icon>\n        </ons-toolbar-button>\n        <ons-toolbar-button if.bind="isSearching" click.delegate="cancelSearch()">\n          <ons-icon icon="ion-ios-arrow-back, material:md-arrow-left"></ons-icon>\n        </ons-toolbar-button>\n        <form style="flex:1;" submit.delegate="onSearch()" click.delegate="showSearch()">\n          <input ref="_searchinput" type="search" class="search-input" i18n i18n-attrs="placeholder:search.placeholder" value.bind="searchText" input.trigger="onSearchInput()" />\n        </form>\n        <ons-toolbar-button if.bind="searchText" click.delegate="clearSearch()">\n          <ons-icon icon="ion-ios-close-empty, material:md-close"></ons-icon>\n        </ons-toolbar-button>\n      </div>\n      <div class="right">\n      </div>\n    </ons-toolbar>\n    \x3c!-- search sheet overlay --\x3e\n    <div show.bind="isSearching" style="z-index:11000;background-color:#fff;position:absolute;top:0;right:0;left:0;bottom:0;" ref="_searchoverlay">\n      <div class="card" show.bind="!searchText">\n        <div style="display:flex;flex-wrap:wrap;align-items:flex-start;">\n          <div class="category-item" repeat.for="category of categories">\n            <div style="padding:10px 5px;" click.delegate="searchCategory(category)">\n              <ons-button css="width:48px;height:48px;border-radius:100%;line-height:48px;padding:0;background-color:${category.icon.color};">\n                <span class="category ons-icon ${category.icon.prefix} ${category.icon.prefix}-${category.icon.name}"></span>\n              </ons-button>\n              <div class="category-label" innerhtml.bind="category.name"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style="padding:0 10px;" show.bind="searchText && searchResults.locations.length === 0 && searchResults.systems.length === 0">\n        <p i18n="search.no-results"></p>\n      </div>\n      <div class="card" style="padding:0;" show.bind="searchText">\n        <ons-list>\n          <ons-list-item repeat.for="location of searchResults.locations" tappable modifier="longdivider" click.delegate="onLocationResultClick(location)">\n            <div class="left"></div>\n            <div class="center">\n              <span class="list-item__title">${location.name}</span>\n            </div>\n          </ons-list-item>\n          <ons-list-item repeat.for="system of searchResults.systems" tappable modifier="longdivider" click.delegate="onResultClick(system)">\n            <div class="left"></div>\n            <div class="center">\n              <span class="list-item__title">${system.building.name || system.organisation.name}</span>\n              <span class="list-item__subtitle">\n                <span if.bind="system.building.name">${system.organisation.name}</span>\n                <br if.bind="system.building.name"/>\n                <span>${system.building.strasse_nr}, ${system.building.plz} ${system.building.ort}</span>\n              </span>\n            </div>\n          </ons-list-item>\n        </ons-list>\n      </div>\n    </div>\n    <div style="display:flex;flex-direction:column;height:100%;">\n      <div ref="_map" style="flex:1;width:100%;"></div>\n      <leaflet-layer-control map.bind="map"></leaflet-layer-control>\n      <div show.bind="selection" style="position:relative;max-height:60%;height:auto;z-index:10000;display:flex;">\n        <ons-button style="position:fixed;right:0;left:auto;margin-top:-16px;z-index:10000;" modifier="quiet">\n          <ons-icon icon="ion-record,material:md-circle" size="2x" style="color:#fff;"></ons-icon>\n        </ons-button>\n        <ons-button click.trigger="deselect()" style="position:fixed;right:0;left:auto;margin-top:-16px;z-index:10001;" modifier="quiet">\n          <ons-icon icon="ion-ios-close,material:md-close-circle" size="2x"></ons-icon>\n        </ons-button>\n        <ons-list style="flex:1;overflow-y:scroll;" ref="_selectionList">\n          <template if.bind="selection.systems.length === 1">\n            <ons-list-header if.bind="selection.name && selection.name !== selection.systems[0].name">\n              <span>${selection.name}</span>\n            </ons-list-header>\n            <ons-list-item repeat.for="system of selection.systems" tappable click.trigger="showInfo(system)" style="margin-bottom:0px;">\n              <span class="list-item__title">\n                <span>${system.name}</span>\n              </span>\n              <span class="list-item__subtitle" if.bind="system.organisation.name">\n                <span>${system.organisation.name}</span>\n              </span>\n            </ons-list-item>\n          </template>\n          <template if.bind="selection.systems.length > 1">\n            <ons-list-header if.bind="selection.name">\n              <span>${selection.name}</span>\n            </ons-list-header>\n              <ons-list-item repeat.for="system of selection.systems" tappable click.trigger="showInfo(system)" style="margin-bottom:0px;">\n                <span class="list-item__title">\n                  <span>${system.name}</span>\n                </span>\n                <span class="list-item__subtitle" if.bind="system.organisation.name">\n                  <span>${system.organisation.name}</span>\n                </span>\n              </ons-list-item>\n          </template>\n        </ons-list>\n      </div>\n    </div>\n  </ons-page>\n</template>\n'}),t.file("pages/home.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(e,"__esModule",{value:!0});var l=t("resize-observer-polyfill"),c=t("onsenui"),d=t("aurelia-router"),p=t("aurelia-framework"),u=t("../services/config"),f=t("../services/db"),h=t("../services/state"),g=t("../services/search"),m=t("../services/storage"),b=t("../models/building"),y=t("../models/room-type"),v=t("../models/system"),x=t("../plugins/aurelia-messageformat"),w=function(){function e(e,t,n,i,o,a){this.isSearching=!1,this.router=e,this.db=t,this.storage=n,this.search=i,this.config=o,this.state=a,this.baseLayers=new Map;try{for(var s=r(this.config.basemaps),l=s.next();!l.done;l=s.next()){var d=l.value;"google"===d.type&&this.baseLayers.set(d.id,L.gridLayer.googleMutant(d.config))}}catch(e){p={error:e}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(p)throw p.error}}this.overlays=new Map,this.overlays.set("buildings",L.markerClusterGroup({maxClusterRadius:this.getMaxClusterRadius,iconCreateFunction:this.createClusterIcon})),this.overlays.set("marker",L.marker()),this.controls=new Map;var p,u,f=L.control.locate({showPopup:!1,onLocationError:function(e){c.notification.alert(x._("error.geolocation.message"),{title:x._("error.geolocation.title")})},locateControl:{}});f._start=f.start.bind(f),f._stop=f.stop.bind(f),f._setView=f.setView.bind(f),f.stop=this.stopGeolocation.bind(this),f.start=this.startGeolocation.bind(this),f.setView=this.setGeolocationView.bind(this),this.controls.set("locate",f)}return e.prototype.attached=function(){var e=new l(this.resizeMap.bind(this)),t=this.overlays.get("buildings"),n=this.overlays.get("marker"),i=this.controls.get("locate"),o=this.state.mapBounds,a=this.storage.getItem("geolocation");this.map=L.map(this._map,{attributionControl:!1}),this.map.addLayer(this.baseLayers.get(this.state.baseLayerId)),this.map.addLayer(t),this.map.addControl(i),this.map.fitBounds(o),a&&i.start(),this.map.on("moveend",this.updateMapView,this),n.on("click",this.onMarkerClick,this),t.on("click",this.onBuildingClick,this),t.on("dblclick",this.onBuildingDoubleClick,this),e.observe(this._map),this.buildings=this.db.query(v.System).groupByRelation(b.Building).all(),this.categories=this.db.query(y.RoomType).all(),this.db.sortByDistance(this.map.getCenter())},e.prototype.onBuildingClick=function(e){this.selection===e.layer.data&&1===this.selection.systems.length?this.showInfo(this.selection.systems[0]):this.selection=e.layer.data},e.prototype.onBuildingDoubleClick=function(e){this.selection=e.layer.data,1===this.selection.systems.length&&this.showInfo(this.selection.systems[0])},e.prototype.onMarkerClick=function(e){this.selection&&1===this.selection.systems.length&&this.showInfo(this.selection.systems[0])},e.prototype.deselect=function(){this.selection=null,this._selectionList.scrollTop=0},Object.defineProperty(e.prototype,"selection",{get:function(){return this.overlays.get("marker").data},set:function(e){var t=this.overlays.get("marker");e?(t.setLatLng([e.lat,e.lng]),t.data=e,this.map.addLayer(t),this.panToSelection({animate:!1}),t._bringToFront(),this._selectionList.scrollTop=0):(this.map.removeLayer(t),t.data=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buildings",{get:function(){return this.overlays.get("buildings").getLayers().map(function(e){return e.data})},set:function(e){var t=this,n=this.overlays.get("buildings");n.clearLayers(),e.forEach(function(e){var i=t.createBuildingMarker(e);i.data=e,n.addLayer(i)})},enumerable:!0,configurable:!0}),e.prototype.updateMapView=function(e){var t=e.target.getBounds();this.storage.setItem("mapbounds",[[t.getSouth(),t.getWest()],[t.getNorth(),t.getEast()]])},e.prototype.showMenu=function(){document.getElementById("menu").open()},e.prototype.showSearch=function(){this.isSearching||(this.isSearching=!0,this._searchoverlay.scrollTop=0,this.db.sortByDistance(this.map.getCenter()),this.searchText=this.search.text,this.search.update(this.search.text),this.searchResults=this.search.results,this.searchText=this.search.text)},e.prototype.cancelSearch=function(){this.isSearching=!1,this.searchText=this.search.text},e.prototype.clearSearch=function(){this.isSearching?(this.search.applyFilter=!1,this.search.update(null),this.searchText=null,this.searchResults=this.search.results,this._searchinput.focus()):(this.search.reset(),this.buildings=this.db.query(v.System).groupByRelation(b.Building).all(),this.selection=null,this.searchText=this.search.text,this.searchResults=this.search.results)},e.prototype.showInfo=function(e){this.router.navigateToRoute("system",{id:e.id})},e.prototype.searchCategory=function(e){this.isSearching=!1,this.buildings=this.db.query(v.System).filterBy("typID",e.id).groupByRelation(b.Building).all(),this.search.filter={property:"typID",value:e.id},this.searchText=this.search.text=e.name,this.selection=null,this.zoomToNearest()},e.prototype.zoomToNearest=function(){var e=this.map.getCenter(),t=this.overlays.get("buildings"),n=L.GeometryUtil.closestLayer(this.map,t.getLayers(),e);if(!this.map.getBounds().contains(n.layer.getLatLng())){var i=L.latLngBounds(n.layer.getLatLng(),e);this.disableGeolocationTracking(),this.map.fitBounds(i,{maxZoom:this.map.getZoom(),padding:[40,40]})}},e.prototype.onResultClick=function(e){var t=this,n=this.search.query.groupByRelation(b.Building);this.isSearching=!1,this.buildings=n.all(),this.search.text=this.searchText,this.selection=null,this.map.once("moveend",function(){t.selection=n.getById(e.building.id)}),this.disableGeolocationTracking(),this.map.setView([e.building.lat,e.building.lng],17)},e.prototype.onLocationResultClick=function(e){this.isSearching=!1;var t=this.search.query.groupByRelation(b.Building);this.buildings=t.all(),this.search.text=this.searchText,this.selection=null,this.disableGeolocationTracking(),this.map.fitBounds(e.bounds)},e.prototype.onSearch=function(){this.onSearchInput()},e.prototype.onSearchInput=function(){var e=this,t=this._searchinput.value;this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){e.search.applyFilters&&(e.search.applyFilters=!1,e.search.update()),e.searchResults=e.search.execute(t)},500)},e.prototype.startGeolocation=function(){var e=this.controls.get("locate");this.storage.setItem("geolocation",!0),e.isLocatingStart=!0,e._start()},e.prototype.stopGeolocation=function(){var e=this.controls.get("locate");this.storage.setItem("geolocation",!1),e._stop()},e.prototype.setGeolocationView=function(){var e=this.controls.get("locate");e.isLocatingStart?(e.isLocatingStart=!1,e.options.keepCurrentZoomLevel=!1,e.options.locateOptions.maxZoom=this.map.getZoom()<15?15:this.map.getZoom(),e._setView(),e.options.keepCurrentZoomLevel=!0,e.options.locateOptions.maxZoom=1/0):e._setView()},e.prototype.disableGeolocationTracking=function(){this.controls.get("locate")._onDrag()},e.prototype.resizeMap=function(){var e=this;this.selection&&this.map.once("moveend",function(){var t=e.overlays.get("marker");e.panToSelection({animate:!0}),t._bringToFront()}),this.map.invalidateSize({pan:!1})},e.prototype.panToSelection=function(e){var t=L.latLng(this.selection.lat,this.selection.lng);this.map.getBounds().contains(t)||this.map.panTo(t,e)},e.prototype.createBuildingMarker=function(e){var t,n=e.icon;return t=n?'<div style="background-color:'+n.color+'">\n          <span class="ons-icon '+n.prefix+" "+n.prefix+"-"+n.name+'"></span>\n        </div>':"<div>"+e.systems.length+"</div>",L.marker([e.lat,e.lng],{icon:L.divIcon({className:"leaflet-building-icon",iconSize:28,html:t})})},e.prototype.createClusterIcon=function(e){var t=e.getChildCount(),n=" marker-cluster-",i=22;return t<10?n+="small":t<100?(n+="medium",i=26):(n+="large",i=30),new L.DivIcon({html:"<div>"+t+"</div>",className:"marker-cluster"+n,iconSize:i})},e.prototype.getMaxClusterRadius=function(e){return e<13?80:e<15?50:e<17?30:20},a([p.bindable(),s("design:type",Object)],e.prototype,"state",void 0),e=a([p.inject(d.Router,f.Database,m.Storage,g.Search,u.Config,h.State),s("design:paramtypes",[Object,Object,Object,Object,Object,Object])],e)}();e.Home=w}),t.file("services/search.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(e,"__esModule",{value:!0});var l=t("aurelia-framework"),c=t("./db"),d=t("../models/location"),p=t("../models/system"),u=function(){function e(e){this.db=e,this.reset()}return e.prototype.reset=function(){this.text=null,this.filter=null,this.applyFilters=!0,this.dataset=[],this.results={locations:[],systems:[]}},e.prototype.update=function(e){if(void 0===e&&(e=null),this.query=this.db.query(p.System),this.applyFilters&&this.filter&&this.query.filterBy(this.filter.property,this.filter.value),this.dataset=this.query.all(),this.applyFilters){var t=new Map;this.results={locations:[],systems:[]};try{for(var n=r(this.dataset),i=n.next();!i.done;i=n.next()){var o=i.value,a=o.building,s=o.organisation,l=a.id+"-"+s.id;if(t.has(l)||(t.set(l,o),this.results.systems.push(o)),20===this.results.systems.length)break}}catch(e){c={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(c)throw c.error}}}else e&&(this.results=this.execute(e));var c,d},e.prototype.execute=function(e,t){void 0===t&&(t=10);var n={locations:[],systems:[]};e=e.trim().toLowerCase().split(" ").filter(function(e){return""!==e});try{for(var i=r(this.db.query(d.Location).all()),o=i.next();!o.done;o=i.next()){for(var a=o.value,s=(a.name+" "+a.plzs).toLowerCase(),l=0,c=0;c<e.length;c++){var p=e[c];s.indexOf(p)>-1&&l++}if(l===e.length&&n.locations.push(a),3===n.locations.length)break}}catch(e){u={error:e}}finally{try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(u)throw u.error}}var u,f,h,g,m=new Map;try{for(var b=r(this.dataset),y=b.next();!y.done;y=b.next()){var v=y.value,x=v.building,w=v.organisation,_=x.id+"-"+w.id;if(!m.has(_)){l=0;s=(s=x.name+" "+x.strasse_nr+"\n          "+x.ort+" "+x.plz+" "+x.canton.kantonkuerzel+"\n          "+w.name+" "+v.roomtype.name).toLowerCase();for(c=0;c<e.length;c++){p=e[c];s.indexOf(p)>-1&&l++}l===e.length&&(m.set(_,v),n.systems.push(v))}if(n.systems.length===t)break}}catch(e){h={error:e}}finally{try{y&&!y.done&&(g=b.return)&&g.call(b)}finally{if(h)throw h.error}}return n},e=a([l.inject(c.Database),s("design:paramtypes",[Object])],e)}();e.Search=u}),t.file("pages/impressum.css",function(e,t,n,i,o){n.exports=".page .page__background {\n  background-color: #fff;\n}\n\nh1.paragraph {\n  font-size: 17px;\n  font-weight: bold;\n  margin-bottom: 4px;\n}\nh1.paragraph + p,\nh1.paragraph + div > p {\n  margin-top: 0;\n}\n\n.list.list-with-border .list-item:first-child {\n  border-top: 1px solid #ccc;\n}\n.list.list-with-border .list-item:last-child {\n  border-bottom: 2px solid #ccc;\n}\n.list.list--material.list-with-border .list-item:first-child {\n  border-top: 1px solid #eee;\n}\n.list.list--material.list-with-border .list-item:last-child {\n  border-bottom: 2px solid #eee;\n}\n"}),t.file("pages/impressum.html",function(e,t,n,i,o){n.exports='<template>\n  <require from ="./impressum.css"></require>\n  <ons-page class="page">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n    </ons-toolbar>\n    <div style="margin: 0 16px">\n      <h1 class="paragraph" i18n="address"></h1>\n      <p i18n="pages.legal-notice.responsability"></p>\n      <p>IGGH Interessengemeinschaft GehÃ¶rlose und HÃ¶rbehinderte<br/>\n      Belpstrasse 24<br/>\n      3007 Bern</p>\n    </div>\n    <div style="margin: 0 16px 12px; padding-top:8px;">\n      <h1 class="paragraph" i18n="pages.sponsors.title"></h1>\n      <div i18n="pages.sponsors.intro"></div>\n    </div>\n    <ons-list modifier="noborder" class="list-with-border">\n      <ons-list-item repeat.for="sponsor of sponsors" modifier="longdivider tappable" click.delegate="openWebsite(sponsor)">\n        <span class="center" style="padding-right:14px;">\n          <img if.bind="sponsor.logo" src="${sponsor.logo}" alt="${sponsor.title}" style="max-width:100%;max-height:120px;">\n          <span if.bind="!sponsor.logo" class="list-item__title">${sponsor.title}</span>\n        </span>\n      </ons-list-item>\n    </ons-list>\n\n    <div style="margin: 0 16px;padding-top:32px;">\n      <h1 class="paragraph" i18n="pages.legal-notice.warrenty.title"></h1>\n      <p i18n="pages.legal-notice.warrenty.content"></p>\n\n      <h1 class="paragraph" i18n="pages.legal-notice.liability.title"></h1>\n      <p i18n="pages.legal-notice.liability.content"></p>\n      \n      <h1 class="paragraph" i18n="pages.legal-notice.links.title"></h1>\n      <p i18n="pages.legal-notice.links.content"></p>\n      \n      <h1 class="paragraph" i18n="pages.legal-notice.privacy.title"></h1>\n      <div i18n="pages.legal-notice.privacy.content"></div>\n      \n      <h1 class="paragraph" i18n="pages.legal-notice.copyright.title"></h1>\n      <p i18n="pages.legal-notice.copyright.content"></p>\n\n      <p>\n        Copyright Â© IGGH Interessengemeinschaft, GehÃ¶rlose und HÃ¶rbehinderte<br/>\n        Belpstrasse 24, 3007 Bern\n      </p>\n    </div>\n  </ons-page>\n</template>\n'}),t.file("pages/impressum.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("../services/config"),c=function(){function e(e){this.config=e}return e.prototype.activate=function(e,t){this.title=t.title,this.sponsors=[{title:"Irma Wigert Stiftung c/o pro audito schweiz",link:""},{title:"pro audito schweiz",link:"http://www.pro-audito.ch/",logo:this.config.baseUrl+"/pictures/logos/logo-pro-audito-schweiz.png"},{title:"Reformierte Kirche Kanton Zug",link:"http://www.ref-zug.ch/kanton-zug/",logo:this.config.baseUrl+"/pictures/logos/logo-ref-kirche-kt-zug.png"},{title:"Reformierte Kirche Baselland",link:"https://refbl.ch/",logo:this.config.baseUrl+"/pictures/logos/logo-ref-kirche-baselland.png"},{title:"Reformierte Kirche Kanton Luzern",link:"http://www.reflu.ch/",logo:this.config.baseUrl+"/pictures/logos/logo-ref-kirche-kt-luzern.png"},{title:"Evangelische Landeskirche des Kantons Thurgau",link:"http://www.evang-tg.ch/",logo:this.config.baseUrl+"/pictures/logos/logo-evg-kirche-kt-thurgau.png"}]},e.prototype.openWebsite=function(e){e.link&&window.open(e.link,"_system")},e=a([r.inject(l.Config),s("design:paramtypes",[Object])],e)}();e.Impressum=c}),t.file("pages/system/add.css",function(e,t,n,i,o){n.exports=".address-list {\n  max-height: 150px;\n  overflow-y: scroll;\n}\n\n.image-upload {\n  margin-top: 8px;\n  width: 100%;\n}\n\nons-button.upload-button {\n  border: 1px dashed #ccc;\n  background-color: rgb(249, 249, 249);\n  color: #333;\n  height: 140px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-upload .upload-preview {\n  height: 140px;\n  width: 100%;\n  position: relative;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n\n.form ons-list-item .left {\n  align-items: start;\n}\n.form ons-list-item .left ons-icon {\n  line-height: 1.5em;\n}\n"}),t.file("pages/system/add.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./add.css"></require>\n\n  <ons-page class="page-text">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">\n        ${title}\n      </div>\n      <div class="right">\n        <ons-toolbar-button click.delegate="commit()">\n          <ons-icon icon="md-mail-send"></ons-icon>\n        </ons-toolbar-button>\n      </div>\n    </ons-toolbar>\n    <ons-list modifier="noborder" class="form">\n      <ons-list-header style="display:none;"></ons-list-header>\n      <ons-list-item modifier="nodivider" click.trigger="showPositionPage()">\n        <div class="left">\n          <ons-icon icon="ion-ios-location,material:md-pin" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="address" class="input-label"><span i18n="address"></span>*</label>\n          <ons-input input-id="address" type="text" modifier="underbar" style="width:100%;" value.one-way="data.formatted_address" readonly="true"></ons-input>\n          <div class="error" if.bind="errors.address">${errors.address}</div>\n          <div style="width:100%;height:120px;position:relative;margin-top:12px;">\n            <leaflet-map fixed.bind="true" overlays.bind="overlays" center.bind="data.coordinates" bounds.bind="bounds" layer-control.bind="false" zoom-control.bind="false"></leaflet-map>\n            <div if.bind="!place" style="z-index:10000;background-color: rgba(0,0,0,0.5);color:#fff;position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;padding:16px;">\n              <div style="text-align:center;" i18n="pages.add-system.mark-position"></div>\n            </div>\n          </div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="ion-camera,material:md-camera" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label class="input-label" i18n="photo"></label>\n          <ons-button if.bind="imageUrl" click.trigger="deleteImage()" modifier="quiet" style="position:absolute;right:6px;top:7px;" i18n="delete"></ons-button>\n          <div class="image-upload">\n            <ons-button if.bind="!imageUrl" click.trigger="uploadImageClick()" modifier="quiet" class="upload-button">\n              <ons-icon icon="md-plus"></ons-icon>\n            </ons-button>\n            <div if.bind="imageUrl" class="upload-preview" css="background-image:url(${imageUrl});" click.trigger="uploadImageClick()">\n            </div>\n            <input type="file" ref="imageInputEl" show.bind="false" change.trigger="onImageChange()" />\n          </div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="md-comment-text" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="annotations" class="input-label" i18n="annotation"></label>\n          <textarea id="annotations" class="textarea" rows="4" style="width:100%;margin-top:8px;" value.bind="data.annotations"></textarea>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-header i18n="your-contact-info"></ons-list-header>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="ion-person, material:md-account" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="username" class="input-label"><span i18n="full-name"></span>*</label>\n          <ons-input input-id="username" type="text" modifier="underbar" style="width:100%;" value.bind="data.username" input.trigger="validate($event)"></ons-input>\n          <div class="error" if.bind="errors.username">${errors.username}</div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item modifier="nodivider">\n        <div class="left">\n          <ons-icon icon="ion-email, material:md-email" fixed-width="true"></ons-icon>\n        </div>\n        <div class="center">\n          <label for="useremail" class="input-label"><span i18n="email-address"></span>*</label>\n          <ons-input input-id="useremail" type="email" modifier="underbar" style="width:100%;" value.bind="data.useremail" input.trigger="validate($event)"></ons-input>\n          <div class="error" if.bind="errors.useremail">${errors.useremail}</div>\n        </div>\n        <div class="right"></div>\n      </ons-list-item>\n      <ons-list-item>\n        <div class="right">\n          <ons-button click.delegate="commit()">Senden</ons-button>\n        </div>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n  \x3c!-- Position page overlay --\x3e\n  <ons-page if.bind="positionPageVisible">\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center" i18n="address"></div>\n      <div class="right">\n        <ons-toolbar-button disabled.bind="!place" click.trigger="onAcceptAddressClick()">\n          <ons-icon icon="md-check"></ons-icon>\n        </ons-toolbar-button>\n      </div>\n    </ons-toolbar>\n    <ons-list modifier="noborder" style="display:flex;flex-direction:column;height:100%;">\n      <ons-list-item modifier="nodivier">\n        <div class="center">\n          <ons-input input-id="address" type="text" value.one-way="place.name" modifier="underbar" style="width:100%;"\n                     ref="addressInputEl" input.trigger="onAddressChange($event) & debounce" blur.trigger="onAddressBlur() & debounce"\n                     focus.trigger="onAddressFocus()" i18n-attrs="placeholder:pages.add-system.search.placeholder">\n          </ons-input>\n          <div style="position:relative;width:100%;">\n            <div style="position:absolute;top:0;right:0;left:0;z-index:20000;" class="popover--material__content" if.bind="addressListVisible">\n              <ons-list modifier="noborder" class="address-list">\n                <ons-list-item modifier="nodivider" tappable="true" repeat.for="item of addressList" click.delegate="onAddressListItemClick(item)">\n                  <div class="center">\n                    <div class="list-item__title">${item.structured_formatting.main_text}</div>\n                    <div class="list-item__subtitle">${item.structured_formatting.secondary_text}</div>\n                  </div>\n                </ons-list-item>\n              </ons-list>\n            </div>\n          </div>\n        </div>\n      </ons-list-item>\n      <ons-list-item style="flex:1;padding:0;" modifier="nodivier">\n        <div class="center" style="padding:0;">\n          <leaflet-map mapclick.trigger="onPositionMapClick($event)" view-model.ref="leafletMap" bounds.bind="bounds" overlays.bind="overlays" center.bind="center" style="flex:1;"></leaflet-map>\n        </div>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n'}),t.file("pages/system/add.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("aurelia-history"),c=t("aurelia-fetch-client"),d=t("onsenui"),p=t("../../services/config"),u=t("../../services/db"),f=t("../../models/canton"),h=t("../../plugins/aurelia-messageformat"),g=function(){function e(e,t,n){var i=this;this.overlays=[],this.positionPageVisible=!1,this.addressListVisible=!1,this.image=null,this.place=null,this.data={name:"",lat:"",lng:"",formatted_address:"",street:"",housenumber:"",postcode:"",location:"",canton:"",image:null,annotations:"",username:"",useremail:""},this.errors={},this.addressList=[],this.searchTypes=["art_gallery","bank","church","hindu_temple","hospital","insurance_agency","local_government_office","mosque","movie_theater","museum","pharmacy","police","post_office","school","stadium","synagogue","university"],this.history=e,this.config=t,this.db=n,this.httpClient=new c.HttpClient,this.httpClient.configure(function(e){e.useStandardConfiguration().withBaseUrl(i.config.baseUrl+"/db_add_system.php").withDefaults()}),this.autocompleteService=new google.maps.places.AutocompleteService,this.geocoder=new google.maps.Geocoder,this.placesService=new google.maps.places.PlacesService(document.createElement("div"))}return e.prototype.activate=function(e,t){this.title=t.title},e.prototype.showPositionPage=function(){this.history.history.pushState({},"",""),this.positionPageVisible=!0,window.addEventListener("popstate",this.onPositionPageBack.bind(this))},e.prototype.onPositionPageBack=function(){this.positionPageVisible=!1,this.coordinates=this.data.coordinates,window.removeEventListener("popstate",this.onPositionPageBack.bind(this))},e.prototype.onPositionMapClick=function(e){var t=this;this.coordinates=e.detail.latlng,this.center=this.coordinates,this.searchNearBy(this.coordinates,25).then(function(e){t.loadPlaceDetail(e.place_id)}).catch(function(){t.geocodeLocation(t.coordinates).then(function(e){t.loadPlaceDetail(e.place_id)}).catch(function(e){d.notification.alert(h._("pages.add-system.search.no-results.message"),{title:h._("pages.add-system.search.no-results.title")})})})},e.prototype.onAddressChange=function(e){var t=this,n=e.target.value;n.length>=3?this.queryAddressListItems(n).then(function(){t.showAddressList()}).catch(function(){t.hideAddressList()}):this.hideAddressList()},e.prototype.onAddressBlur=function(){this.place&&(this.addressInputEl.value=this.place.name),this.hideAddressList()},e.prototype.onAddressFocus=function(){this.showAddressList()},e.prototype.onAddressListItemClick=function(e){var t=this;this.loadPlaceDetail(e.place_id).then(function(e){var n=e.geometry.viewport.toJSON();t.leafletMap.map.fitBounds([[n.north,n.east],[n.south,n.west]]),t.coordinates=e.geometry.location.toJSON()})},e.prototype.showAddressList=function(){!this.addressListVisible&&this.addressList.length>0&&(this.addressListVisible=!0)},e.prototype.hideAddressList=function(){this.addressListVisible=!1},e.prototype.placeChanged=function(e){e&&this.queryAddressListItems(e.name)},e.prototype.searchNearBy=function(e,t){var n=this;return new Promise(function(i,o){n.placesService.nearbySearch({location:e,radius:t},function(e,t){if(e){var a=e.find(function(e){return n.searchTypes.find(function(t){return e.types.indexOf(t)>-1})});a?i(a):o(t)}else o(t)})})},e.prototype.geocodeLocation=function(e){var t=this;return new Promise(function(n,i){t.geocoder.geocode({location:e},function(e,t){"OK"===t?n(e[0]):i(t)})})},e.prototype.queryAddressListItems=function(e){var t=this;return new Promise(function(n,i){var o=t.leafletMap.map.getCenter(),a=new google.maps.LatLng(o.lat,o.lng);t.autocompleteService.getPlacePredictions({input:e,location:a,radius:1e4,types:["address"]},function(e,i){"OK"===i?(t.addressList=e,n(e)):(t.addressList=[],n([]))})})},e.prototype.loadPlaceDetail=function(e){var t=this;return new Promise(function(n,i){t.placesService.getDetails({placeId:e},function(e,o){t.place=e,null!==e?n(e):i(o)})})},e.prototype.coordinatesChanged=function(e){this.overlays=e?[{type:"marker",latLng:L.latLng(e.lat,e.lng)}]:[]},e.prototype.onAcceptAddressClick=function(){var e=this,t=this.place.geometry.viewport.toJSON();this.data.coordinates=this.coordinates,this.data.name=this.place.name||"",this.data.formatted_address=this.place.formatted_address,this.data.lat=this.coordinates.lat,this.data.lng=this.coordinates.lng,this.data.website=this.place.website||"",this.place.address_components.forEach(function(t){t.types.indexOf("postal_code")>-1?e.data.postcode=t.long_name:t.types.indexOf("route")>-1?e.data.street=t.long_name:t.types.indexOf("street_number")>-1?e.data.housenumber=t.long_name:t.types.indexOf("administrative_area_level_1")>-1?e.data.canton=e.db.query(f.Canton).get("name",t.short_name):t.types.indexOf("locality")>-1&&(e.data.location=t.long_name)}),this.bounds=[[t.north,t.east],[t.south,t.west]],this.errors.address=null,this.history.history.back()},e.prototype.uploadImageClick=function(){this.imageInputEl.click()},e.prototype.onImageChange=function(){var e=this.imageInputEl.files[0];e&&(this.image=e,this.imageUrl&&URL.revokeObjectURL(this.imageUrl),this.imageUrl=URL.createObjectURL(this.image))},e.prototype.deleteImage=function(){URL.revokeObjectURL(this.imageUrl),this.imageUrl=null,this.image=null},e.prototype.commit=function(){var e=this,t=new FormData;t.append("username",this.data.username),t.append("useremail",this.data.useremail),t.append("name",this.data.name),t.append("lat",this.data.lat),t.append("lng",this.data.lng),t.append("street_number",this.data.street+" "+this.data.housenumber),t.append("location",this.data.location),t.append("postcode",this.data.postcode),t.append("cantonId",this.data.canton?this.data.canton.id:null),t.append("website",this.data.website),t.append("annotations",this.data.annotations),t.append("image",this.image),this.httpClient.fetch("",{method:"POST",body:t}).then(function(e){return e.json()}).then(function(t){200!==t.code?(e.errors=t.errors,e.showInvalidAlert(t.message)):e.showSuccessMessage()})},e.prototype.showInvalidAlert=function(e){d.notification.alert(e,{title:h._("pages.add-system.submit.error.title")})},e.prototype.showSuccessMessage=function(){var e=this;d.notification.alert(h._("pages.add-system.submit.success.message"),{title:h._("pages.add-system.submit.success.title"),callback:function(){e.history.navigateBack()}})},e.prototype.validate=function(e){this.errors[e.target.id]=null},a([r.bindable(),s("design:type",Object)],e.prototype,"coordinates",void 0),a([r.bindable(),s("design:type",Object)],e.prototype,"bounds",void 0),a([r.bindable(),s("design:type",Object)],e.prototype,"imageUrl",void 0),a([r.bindable,s("design:type",Object)],e.prototype,"place",void 0),e=a([r.inject(l.History,p.Config,u.Database),s("design:paramtypes",[Object,Object,Object])],e)}();e.Add=g}),t.file("pages/system/info.css",function(e,t,n,i,o){n.exports=".room-plan-list {\n  display: flex;\n  flex-direction: row;\n  padding: 0;\n}\n\n.room-plan-list ons-list-item {\n  width: 50vw;\n  height: 50vw;\n  padding: 14px 7px;\n}\n.room-plan-list ons-list-item.first {\n  padding-left: 14px;\n}\n.room-plan-list ons-list-item.last {\n  padding-right: 14px;\n}\n.room-plan-list.list--material ons-list-item {\n  width: 50vw;\n  height: 50vw;\n  padding: 16px 8px;\n}\n.room-plan-list.list--material ons-list-item.first {\n  padding-left: 16px;\n}\n.room-plan-list.list--material ons-list-item.last {\n  padding-right: 16px;\n}\n.room-plan-list ons-list-item .center {\n  margin: 0;\n  padding: 0;\n}\n\n.room-plan-list ons-list-item .image {\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center center;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #eee;\n  box-sizing: border-box;\n}\n"}),t.file("pages/system/info.html",function(e,t,n,i,o){n.exports='<template>\n  <require from="./info.css"></require>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">${data.name}</div>\n    </ons-toolbar>\n    <div if.bind="data.photoUrl" css="background-image:url(\'${data.photoUrl}\');background-repeat:no-repeat;background-size:cover;background-position:center;width:100%;height:35%;">\n    </div>\n    <ons-list>\n      <ons-list-item if.bind="data.strasse_nr || data.plz || data.org">\n        <span class="left">\n          <ons-icon icon="ion-ios-location,material:md-pin" fixed-width="true"></ons-icon>\n        </span>\n        <span class="center">\n          ${data.building.name}<template if.bind="data.organisation.name && data.building.name">, </template>${data.organisation.name}<br/>\n          ${data.building.strasse_nr}, ${data.building.plz} ${data.building.ort}\n      </ons-list-item>\n      <ons-list-item if.bind="data.webadresse" click.trigger="openWebsite()" tappable modifier="chevron" >\n        <span class="left">\n          <ons-icon icon="md-globe" fixed-width="true"></ons-icon>\n        </span>\n        <span class="center" i18n="website"></span>\n      </ons-list-item>\n      <ons-list-header i18n="hearing-assistance-system">\n      </ons-list-header>\n      <ons-list-item>\n        <span class="left">\n          <img src="${data.technology.imageUrl}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          ${data.technology.title}\n        </span>\n      </ons-list-item>\n      <ons-list-item>\n        <span class="left">\n          <img src="${data.rating.imageUrl}" alt="" style="width:1.28571429em;"/>\n        </span>\n        <span class="center">\n          ${data.rating.description}\n        </span>\n      </ons-list-item>\n      <ons-list-item if.bind="data.annotation">\n        ${data.annotation}\n      </ons-list-item>\n      <ons-list-header i18n="room-plans">\n      </ons-list-header>\n      <ons-list class="room-plan-list" if.bind="data.roomPlans.length > 0">\n        <ons-list-item modifier="nodivider" repeat.for="roomPlan of data.roomPlans"\n          tappable class="${$index%2 == 0 ? \'first\' : \'last\'}" click.delegate="showRoomPlan(roomPlan.id)">\n          <div class="center">\n            <div class="image" css="background-image: url(${roomPlan.url})"></div>\n          </div>\n        </ons-list-item>\n      </ons-list>\n      <ons-list-item if.bind="data.roomPlans.length == 0">\n        <div class="center" i18n="no-room-plans"></div>\n      </ons-list-item>\n    </ons-list>\n  </ons-page>\n</template>\n'}),t.file("pages/system/info.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("aurelia-router"),c=t("../../services/db"),d=t("../../services/config"),p=t("../../models/system"),u=function(){function e(e,t,n){this.router=e,this.db=t,this.config=n}return e.prototype.activate=function(e){this.data=this.db.query(p.System).getById(parseInt(e.id,10))},e.prototype.openWebsite=function(){window.open(this.data.webadresse,"_system")},e.prototype.hasRoomPlan=function(){return"transp.png"!==this.data.plan1_dateiname||"transp.png"!==this.data.plan2_dateiname},e.prototype.showRoomPlan=function(e){this.router.navigateToRoute("system-plan",{id:this.data.id,plan:e})},e=a([r.inject(l.Router,c.Database,d.Config),s("design:paramtypes",[Object,Object,Object])],e)}();e.Info=u}),t.file("pages/system/plan.html",function(e,t,n,i,o){n.exports='<template>\n  <ons-page>\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button></ons-back-button>\n      </div>\n      <div class="center">${data.name}</div>\n    </ons-toolbar>\n    <div ref="planmap" style="width:100%;height:100%;"></div>\n  </ons-page>\n</template>\n'}),t.file("pages/system/plan.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("aurelia-framework"),l=t("../../services/db"),c=t("../../services/config"),d=t("../../models/system"),p=function(){function e(e,t){this.db=e,this.config=t}return e.prototype.activate=function(e){var t=this;return this.data=this.db.query(d.System).getById(parseInt(e.id,10)),new Promise(function(n,i){var o=t.data.roomPlans.find(function(t){return t.id===e.plan}),a=new Image;a.onload=function(){var e=256/a.width;t.layer=L.imageOverlay(o.url,[[0,0],[a.height*e,a.width*e]]),n()},a.src=o.url})},e.prototype.attached=function(){this.map=L.map(this.planmap,{crs:L.CRS.Simple,attributionControl:!1,maxZoom:4}),this.map.addLayer(this.layer),this.map.fitBounds(this.layer.getBounds()),this.map.setMaxBounds(this.layer.getBounds())},e=a([r.inject(l.Database,c.Config),s("design:paramtypes",[Object,Object])],e)}();e.Plan=p}),t.file("plugins/aurelia-messageformat/attributes.js",function(e,t,n,i,o){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,n,s):o(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});var r=t("./i18n"),l=t("aurelia-event-aggregator"),c=t("aurelia-templating"),d=t("aurelia-pal"),p=function(){function e(e,t){this.element=e,this.service=t}return e.prototype.valueChanged=function(){this.service.updateTranslations(this.element)},e.inject=[d.DOM.Element,r.I18N],e=a([c.customAttribute("i18n-params"),s("design:paramtypes",[Object,Object])],e)}();e.I18NParamsCustomAttribute=p;var u=function(){function e(e,t,n,i){var o=this;this.element=e,this.service=t,this.ea=n,this.subscription=this.ea.subscribe("i18n:locale:changed",function(){o.service.updateTranslations(o.element)})}return e.prototype.valueChanged=function(e){this.service.updateTranslations(this.element)},e.prototype.unbind=function(){this.subscription&&this.subscription.dispose()},e.inject=[d.DOM.Element,r.I18N,l.EventAggregator],e=a([c.customAttribute("i18n"),s("design:paramtypes",[Object,Object,Object,Object])],e)}();e.I18NCustomAttribute=u}),t.entry="main.js"}),e.import("fuse-box-aurelia-loader"),e.import("aurelia-bootstrapper"),e.target="browser",e.import("default/main.js"),e.main("default/main.js")}(FuseBox);